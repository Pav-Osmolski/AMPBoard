{"version":3,"file":"js/script.min.js","mappings":"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","sources":["webpack://AMPBoard/./assets/js/modules/drag.js","webpack://AMPBoard/./assets/js/modules/columns.js","webpack://AMPBoard/./assets/js/modules/clock.js","webpack://AMPBoard/./assets/js/modules/error.js","webpack://AMPBoard/./assets/js/modules/export.js","webpack://AMPBoard/./assets/js/modules/htmlSyntaxEditor.js","webpack://AMPBoard/./assets/js/modules/search.js","webpack://AMPBoard/./assets/js/modules/settings.js","webpack://AMPBoard/./assets/js/modules/theme.js","webpack://AMPBoard/./assets/js/modules/vhosts.js","webpack://AMPBoard/./assets/js/modules/collapseToggle.js","webpack://AMPBoard/./assets/js/main.js","webpack://AMPBoard/./assets/js/modules/dock.js","webpack://AMPBoard/./assets/js/modules/folders.js","webpack://AMPBoard/./assets/js/modules/linkTemplates.js","webpack://AMPBoard/./assets/js/modules/system.js","webpack://AMPBoard/./assets/js/modules/accordion.js","webpack://AMPBoard/./assets/js/modules/view.js"],"sourcesContent":["// assets/js/modules/drag.js\r\nconst _initialisedLists = new WeakSet();\r\n\r\nexport function enableDragSort( listSelector, opts = {} ) {\r\n\tconst list = document.querySelector( listSelector );\r\n\tif ( !list ) return;\r\n\r\n\tif ( _initialisedLists.has( list ) ) return;\r\n\t_initialisedLists.add( list );\r\n\r\n\tconst itemsSelector = opts.items || 'li';\r\n\tconst handleSelector = opts.handle || null;\r\n\r\n\t// Configurable \"interactive\" rules\r\n\tconst interactiveSelector = opts.interactiveSelector || 'input, select, textarea, button, a, [contenteditable], .no-drag';\r\n\tconst allowInsideHandle = opts.allowInsideHandle || '[data-drag-allow]'; // whitelist inside handle\r\n\tconst allowHandleInteractive = opts.allowHandleInteractive ?? true; // allow whitelisted interactives inside handle\r\n\r\n\tlet dragSrcEl = null;\r\n\tlet dragging = false;\r\n\r\n\t// Pointer drag state (mobile / touch)\r\n\tlet pointerDrag = {\r\n\t\tactive: false,\r\n\t\tstartX: 0,\r\n\t\tstartY: 0,\r\n\t\tid: null,\r\n\t\tstarted: false, // becomes true once threshold passed\r\n\t\tdidReorder: false,\r\n\t};\r\n\r\n\tfunction isInteractive( el ) {\r\n\t\treturn !!el.closest( interactiveSelector );\r\n\t}\r\n\r\n\tfunction resetDragState() {\r\n\t\tArray.from( list.querySelectorAll( itemsSelector ) ).forEach( el => {\r\n\t\t\tel.classList.remove( 'dragElem' );\r\n\t\t\tel.classList.remove( 'over' );\r\n\t\t\tel.draggable = false;\r\n\t\t} );\r\n\t\tdragSrcEl = null;\r\n\t\tdragging = false;\r\n\r\n\t\tif ( pointerDrag.id !== null ) {\r\n\t\t\t// Best-effort release pointer capture on the dragged element\r\n\t\t\tif ( dragSrcEl && dragSrcEl.hasPointerCapture && dragSrcEl.hasPointerCapture( pointerDrag.id ) ) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdragSrcEl.releasePointerCapture( pointerDrag.id );\r\n\t\t\t\t} catch ( _ ) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpointerDrag = {\r\n\t\t\tactive: false,\r\n\t\t\tstartX: 0,\r\n\t\t\tstartY: 0,\r\n\t\t\tid: null,\r\n\t\t\tstarted: false,\r\n\t\t\tdidReorder: false,\r\n\t\t};\r\n\t}\r\n\r\n\tfunction reorderItems( target ) {\r\n\t\tif ( !dragSrcEl || !target || target === dragSrcEl ) return;\r\n\r\n\t\tconst children = Array.from( list.querySelectorAll( `:scope > ${ itemsSelector }` ) );\r\n\t\tconst from = children.indexOf( dragSrcEl );\r\n\t\tconst to = children.indexOf( target );\r\n\r\n\t\tif ( from > -1 && to > -1 && from !== to ) {\r\n\t\t\tif ( from < to ) {\r\n\t\t\t\ttarget.after( dragSrcEl );\r\n\t\t\t} else {\r\n\t\t\t\ttarget.before( dragSrcEl );\r\n\t\t\t}\r\n\t\t\tpointerDrag.didReorder = true;\r\n\t\t}\r\n\t}\r\n\r\n\t// Shared pointerdown: decide mouse (HTML5 DnD) vs touch (pointer-based)\r\n\tlist.addEventListener( 'pointerdown', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( !item || !list.contains( item ) ) return;\r\n\r\n\t\tconst isHandleHit = handleSelector ? !!e.target.closest( handleSelector ) : true;\r\n\t\tif ( handleSelector && !isHandleHit ) return;\r\n\r\n\t\tconst interactiveHit = isInteractive( e.target );\r\n\r\n\t\t// If we hit an interactive elementâ€¦\r\n\t\tif ( interactiveHit ) {\r\n\t\t\t// â€¦but it's inside the handle and on the allowlist, let it start drag\r\n\t\t\tconst allowed = allowHandleInteractive && isHandleHit && e.target.closest( allowInsideHandle );\r\n\t\t\tif ( !allowed ) return;\r\n\t\t}\r\n\r\n\t\t// Mouse / trackpad: use HTML5 DnD path\r\n\t\tif ( e.pointerType === 'mouse' ) {\r\n\t\t\titem.draggable = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Touch / pen: use custom pointer drag\r\n\t\tdragSrcEl = item;\r\n\t\tpointerDrag.active = true;\r\n\t\tpointerDrag.id = e.pointerId;\r\n\t\tpointerDrag.startX = e.clientX;\r\n\t\tpointerDrag.startY = e.clientY;\r\n\t\tpointerDrag.started = false;\r\n\t\tpointerDrag.didReorder = false;\r\n\r\n\t\ttry {\r\n\t\t\titem.setPointerCapture( e.pointerId );\r\n\t\t} catch ( _ ) {\r\n\t\t}\r\n\t}, {capture: true} );\r\n\r\n\t// HTML5 drag events (desktop mouse)\r\n\tlist.addEventListener( 'dragstart', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( !item || !list.contains( item ) ) return;\r\n\r\n\t\tdragSrcEl = item;\r\n\t\tdragging = true;\r\n\r\n\t\tif ( e.dataTransfer ) {\r\n\t\t\te.dataTransfer.effectAllowed = 'move';\r\n\t\t\ttry {\r\n\t\t\t\te.dataTransfer.setData( 'text/plain', '' );\r\n\t\t\t} catch ( _ ) {\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\titem.classList.add( 'dragElem' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragenter', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( !item || !list.contains( item ) ) return;\r\n\t\titem.classList.add( 'over' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragover', ( e ) => {\r\n\t\tif ( dragSrcEl ) e.preventDefault();\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragleave', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( item && list.contains( item ) ) {\r\n\t\t\titem.classList.remove( 'over' );\r\n\t\t}\r\n\t} );\r\n\r\n\tlist.addEventListener( 'drop', ( e ) => {\r\n\t\te.preventDefault();\r\n\t\tconst target = e.target.closest( itemsSelector );\r\n\t\tif ( !target || !dragSrcEl || target === dragSrcEl ) return;\r\n\r\n\t\treorderItems( target );\r\n\r\n\t\tif ( pointerDrag.didReorder || dragging ) {\r\n\t\t\tlist.dispatchEvent( new CustomEvent( 'sorted', {bubbles: true} ) );\r\n\t\t}\r\n\t\ttarget.classList.remove( 'over' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragend', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( item && list.contains( item ) ) {\r\n\t\t\titem.classList.remove( 'dragElem' );\r\n\t\t\titem.draggable = false;\r\n\t\t}\r\n\t\tArray.from( list.querySelectorAll( itemsSelector ) ).forEach( el => el.classList.remove( 'over' ) );\r\n\t\tdragSrcEl = null;\r\n\t\tdragging = false;\r\n\t} );\r\n\r\n\t// Pointer-based drag for touch / pen\r\n\tlist.addEventListener( 'pointermove', ( e ) => {\r\n\t\tif ( !pointerDrag.active || e.pointerId !== pointerDrag.id || !dragSrcEl ) return;\r\n\r\n\t\tconst dx = Math.abs( e.clientX - pointerDrag.startX );\r\n\t\tconst dy = Math.abs( e.clientY - pointerDrag.startY );\r\n\r\n\t\t// Small movement threshold so simple taps do not start a drag\r\n\t\tif ( !pointerDrag.started ) {\r\n\t\t\tif ( dx + dy < 6 ) return; // ~3px in each direction\r\n\t\t\tpointerDrag.started = true;\r\n\t\t\tdragging = true;\r\n\t\t\tdragSrcEl.classList.add( 'dragElem' );\r\n\t\t}\r\n\r\n\t\t// When dragging, prevent scroll\r\n\t\te.preventDefault();\r\n\r\n\t\tconst targetEl = document.elementFromPoint( e.clientX, e.clientY );\r\n\t\tif ( !targetEl ) return;\r\n\r\n\t\tconst overItem = targetEl.closest( itemsSelector );\r\n\t\tif ( !overItem || !list.contains( overItem ) || overItem === dragSrcEl ) return;\r\n\r\n\t\t// Update \"over\" classes\r\n\t\tArray.from( list.querySelectorAll( itemsSelector ) ).forEach( el => el.classList.remove( 'over' ) );\r\n\t\toverItem.classList.add( 'over' );\r\n\r\n\t\treorderItems( overItem );\r\n\t} );\r\n\r\n\tfunction endPointerDrag( e ) {\r\n\t\tif ( !pointerDrag.active || e.pointerId !== pointerDrag.id ) return;\r\n\r\n\t\t// If we actually performed a drag reorder, emit sorted\r\n\t\tif ( pointerDrag.started && pointerDrag.didReorder ) {\r\n\t\t\tlist.dispatchEvent( new CustomEvent( 'sorted', {bubbles: true} ) );\r\n\t\t}\r\n\r\n\t\tresetDragState();\r\n\t}\r\n\r\n\tlist.addEventListener( 'pointerup', endPointerDrag );\r\n\tlist.addEventListener( 'pointercancel', endPointerDrag );\r\n\r\n\t// Suppress accidental click activation after a drag\r\n\tlist.addEventListener( 'click', ( e ) => {\r\n\t\tif ( !dragging ) return;\r\n\t\tif ( handleSelector && e.target.closest( handleSelector ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t}, true );\r\n}\r\n","// assets/js/modules/columns.js\r\nimport {enableDragSort} from './drag.js';\r\n\r\nconst WIDTH_SIZES = [ 'max-xs', 'max-sm', 'max-md', 'max-lg' ];\r\n\r\nfunction getWidthKey( el ) {\r\n\treturn el.dataset.widthKey || 'width_element';\r\n}\r\n\r\nfunction setWidthForElement( el, size ) {\r\n\tif ( !el ) return;\r\n\r\n\tconst storageKey = getWidthKey( el );\r\n\r\n\t// Always store the chosen size, even \"auto\"\r\n\tlocalStorage.setItem( storageKey, size );\r\n\r\n\t// Remove any existing max-* classes\r\n\tel.classList.forEach( ( cls ) => {\r\n\t\tif ( cls.startsWith( 'max-' ) ) {\r\n\t\t\tel.classList.remove( cls );\r\n\t\t}\r\n\t} );\r\n\r\n\t// Only add a class if not \"auto\"\r\n\tif ( size !== 'auto' ) {\r\n\t\tel.classList.add( size );\r\n\t} else {\r\n\t\t// Clear any inline max-width overrides\r\n\t\tel.style.maxWidth = '';\r\n\t}\r\n}\r\n\r\nfunction cycleWidthForElement( el, direction, sizes = WIDTH_SIZES ) {\r\n\tif ( !el ) return;\r\n\r\n\tconst storageKey = getWidthKey( el );\r\n\tconst current = localStorage.getItem( storageKey ) || 'auto';\r\n\tlet idx = sizes.indexOf( current );\r\n\tlet nextIdx;\r\n\r\n\t// If current is not in sizes (e.g. \"auto\"), start from an edge\r\n\tif ( idx === -1 ) {\r\n\t\tnextIdx = direction === 'prev'\r\n\t\t\t? sizes.length - 1 // go to the last size on prev\r\n\t\t\t: 0;               // go to the first size on next\r\n\t} else if ( direction === 'next' ) {\r\n\t\tnextIdx = (idx + 1) % sizes.length;\r\n\t} else if ( direction === 'prev' ) {\r\n\t\tnextIdx = (idx - 1 + sizes.length) % sizes.length;\r\n\t} else {\r\n\t\t// Unknown direction, bail\r\n\t\treturn;\r\n\t}\r\n\r\n\tsetWidthForElement( el, sizes[nextIdx] );\r\n}\r\n\r\nfunction resolveWidthTarget( target ) {\r\n\tif ( !target ) {\r\n\t\t// No implicit default: caller must pass a target or key\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( target instanceof HTMLElement ) {\r\n\t\treturn target;\r\n\t}\r\n\r\n\tif ( typeof target === 'string' ) {\r\n\t\t// First try by data-width-key\r\n\t\tconst byKey = document.querySelector( `.width-resizable[data-width-key=\"${ target }\"]` );\r\n\t\tif ( byKey ) return byKey;\r\n\r\n\t\t// Fallback: treat as selector\r\n\t\treturn document.querySelector( target );\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\n// Public API: still named for backwards compatibility\r\nexport function setColumnWidth( size, target ) {\r\n\tconst el = resolveWidthTarget( target );\r\n\tsetWidthForElement( el, size );\r\n}\r\n\r\nexport function cycleColumnWidth( direction, sizes = WIDTH_SIZES, target ) {\r\n\tconst el = resolveWidthTarget( target );\r\n\tcycleWidthForElement( el, direction, sizes );\r\n}\r\n\r\nexport function initColumnFeatures() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\t// Find all resizable elements\r\n\t\tconst resizables = document.querySelectorAll( '.width-resizable' );\r\n\r\n\t\t// Restore widths for each element\r\n\t\tresizables.forEach( ( el ) => {\r\n\t\t\tconst storageKey = getWidthKey( el );\r\n\t\t\tconst savedSize = localStorage.getItem( storageKey );\r\n\r\n\t\t\t// only apply stored sizes if it's a known max-* value\r\n\t\t\tif ( savedSize && WIDTH_SIZES.includes( savedSize ) ) {\r\n\t\t\t\tsetWidthForElement( el, savedSize );\r\n\t\t\t}\r\n\t\t\t// else: either \"auto\" or nothing, so do nothing\r\n\t\t} );\r\n\r\n\t\t// Wire up all control groups\r\n\t\tconst controlGroups = document.querySelectorAll( '.width-controls' );\r\n\r\n\t\tcontrolGroups.forEach( ( controls ) => {\r\n\t\t\tconst key = controls.dataset.widthFor;\r\n\t\t\tif ( !key ) return;\r\n\r\n\t\t\tconst target = document.querySelector( `.width-resizable[data-width-key=\"${ key }\"]` );\r\n\t\t\tif ( !target ) return;\r\n\r\n\t\t\tconst resetBtn = controls.querySelector( '[data-action=\"reset\"]' );\r\n\t\t\tconst prevBtn = controls.querySelector( '[data-action=\"decrease\"]' );\r\n\t\t\tconst nextBtn = controls.querySelector( '[data-action=\"increase\"]' );\r\n\r\n\t\t\tif ( resetBtn ) {\r\n\t\t\t\tresetBtn.addEventListener( 'click', () => {\r\n\t\t\t\t\tsetWidthForElement( target, 'auto' );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tif ( prevBtn ) {\r\n\t\t\t\tprevBtn.addEventListener( 'click', () => {\r\n\t\t\t\t\tcycleWidthForElement( target, 'prev', WIDTH_SIZES );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tif ( nextBtn ) {\r\n\t\t\t\tnextBtn.addEventListener( 'click', () => {\r\n\t\t\t\t\tcycleWidthForElement( target, 'next', WIDTH_SIZES );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tconst container = document.querySelector( '.columns' );\r\n\t\tif ( container ) {\r\n\t\t\tconst savedOrder = JSON.parse( localStorage.getItem( 'columnOrder' ) || '[]' );\r\n\t\t\tif ( Array.isArray( savedOrder ) && savedOrder.length ) {\r\n\t\t\t\tsavedOrder.forEach( ( id ) => {\r\n\t\t\t\t\tconst col = document.getElementById( id );\r\n\t\t\t\t\tif ( col && col.classList.contains( 'column' ) && !col.classList.contains( 'column-controls' ) ) {\r\n\t\t\t\t\t\tcontainer.appendChild( col );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tfunction saveOrder() {\r\n\t\t\t\tconst order = Array\r\n\t\t\t\t\t.from( container.querySelectorAll( ':scope > .column:not(.column-controls)' ) )\r\n\t\t\t\t\t.map( ( el ) => el.id )\r\n\t\t\t\t\t.filter( Boolean );\r\n\r\n\t\t\t\tlocalStorage.setItem( 'columnOrder', JSON.stringify( order ) );\r\n\t\t\t}\r\n\r\n\t\t\tenableDragSort( '.columns', {\r\n\t\t\t\titems: '.column:not(.column-controls)',\r\n\t\t\t\thandle: '.drag-handle'\r\n\t\t\t} );\r\n\r\n\t\t\tcontainer.addEventListener( 'sorted', saveOrder );\r\n\t\t}\r\n\t} );\r\n}\r\n","// assets/js/modules/clock.js\nexport function initClock() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tupdateClock();\n\t\tsetInterval( updateClock, 1000 );\n\t} );\n}\n\nexport function updateClock() {\n\tconst clock = document.querySelector( '.clock' );\n\tif ( clock ) {\n\t\tconst now = new Date();\n\t\tclock.textContent = now.toLocaleTimeString( [], {\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\tsecond: '2-digit',\n\t\t\thour12: false\n\t\t} );\n\t}\n}\n","// assets/js/modules/error.js\r\nfunction initGenericErrorLog( {\r\n\t                              sectionId,\r\n\t                              toggleButtonId,\r\n\t                              logElementId,\r\n\t                              endpoint\r\n                              } ) {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst body = document.body;\r\n\t\tconst logSection = document.getElementById( sectionId );\r\n\t\tif ( !logSection ) return;\r\n\r\n\t\tconst toggleBtn = document.getElementById( toggleButtonId );\r\n\t\tconst logElement = document.getElementById( logElementId );\r\n\r\n\t\tif ( !toggleBtn || !logElement ) return;\r\n\r\n\t\ttoggleBtn.addEventListener( 'click', function () {\r\n\t\t\tconst isVisible = logElement.classList.contains( 'visible' );\r\n\t\t\tlogElement.classList.toggle( 'visible', !isVisible );\r\n\t\t\tthis.setAttribute( 'aria-expanded', !isVisible );\r\n\t\t} );\r\n\r\n\t\tif ( body.getAttribute( 'data-ajax-error-log-enabled' ) !== 'true' ) return;\r\n\r\n\t\tfunction displayLogContent( data ) {\r\n\t\t\tconst isEmpty = data.trim() === '';\r\n\t\t\tlogElement.innerHTML = isEmpty\r\n\t\t\t\t? `<code class=\"muted\">No errors logged. You're doing great. ðŸŽ‰</code>`\r\n\t\t\t\t: `<code>${ data }</code>`;\r\n\t\t}\r\n\r\n\t\tfunction fetchLog() {\r\n\t\t\tfetch( `${ window.BASE_URL }${ endpoint }`, {cache: 'no-store'} )\r\n\t\t\t\t.then( res => res.ok ? res.text() : Promise.reject() )\r\n\t\t\t\t.then( displayLogContent );\r\n\t\t}\r\n\r\n\t\tfetch( `${ window.BASE_URL }${ endpoint }`, {cache: 'no-store'} )\r\n\t\t\t.then( res => res.ok ? res.text() : Promise.reject() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tdisplayLogContent( data );\r\n\t\t\t\tsetInterval( fetchLog, 3000 );\r\n\t\t\t} )\r\n\t\t\t.catch( () => {\r\n\t\t\t} );\r\n\t} );\r\n}\r\n\r\n// Public wrappers â€” keeps main.js simple\r\nexport function initApacheErrorLog() {\r\n\tinitGenericErrorLog( {\r\n\t\tsectionId: 'apache-error-log-section',\r\n\t\ttoggleButtonId: 'toggle-apache-error-log',\r\n\t\tlogElementId: 'apache-error-log',\r\n\t\tendpoint: 'utils/apache_error_log.php'\r\n\t} );\r\n}\r\n\r\nexport function initPhpErrorLog() {\r\n\tinitGenericErrorLog( {\r\n\t\tsectionId: 'php-error-log-section',\r\n\t\ttoggleButtonId: 'toggle-php-error-log',\r\n\t\tlogElementId: 'php-error-log',\r\n\t\tendpoint: 'utils/php_error_log.php'\r\n\t} );\r\n}\r\n","// assets/js/modules/export.js\r\nexport function initExportModule() {\r\n\tif ( document.readyState === 'loading' ) {\r\n\t\tdocument.addEventListener( 'DOMContentLoaded', () => setupExport() );\r\n\t} else {\r\n\t\tsetupExport();\r\n\t}\r\n}\r\n\r\nfunction setupExport() {\r\n\tconst groupEl = document.getElementById( 'export-group' );\r\n\tconst folderEl = document.getElementById( 'export-folder' );\r\n\tconst uploadsModeRow = document.getElementById( 'uploads-mode-row' );\r\n\r\n\tconst filesForm = document.getElementById( 'export-files-form' );\r\n\tconst filesStatus = document.getElementById( 'export-files-status' );\r\n\r\n\tconst dbForm = document.getElementById( 'export-db-form' );\r\n\tconst dbSelect = document.getElementById( 'export-db' );\r\n\tconst dbStatus = document.getElementById( 'export-db-status' );\r\n\r\n\tif ( !groupEl || !folderEl || !filesForm || !dbForm ) return;\r\n\r\n\tlet groups = [];\r\n\r\n\t// Helpers\r\n\tfunction refreshCsrf() {\r\n\t\treturn fetch( `${ window.BASE_URL }utils/export_files.php?action=token`, {credentials: 'same-origin'} )\r\n\t\t\t.then( r => r.json() )\r\n\t\t\t.then( d => {\r\n\t\t\t\tif ( d.ok && d.token ) {\r\n\t\t\t\t\tdocument.querySelectorAll( 'input[name=\"csrf\"]' ).forEach( el => {\r\n\t\t\t\t\t\tel.value = d.token;\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} )\r\n\t\t\t.catch( () => {\r\n\t\t\t} );\r\n\t}\r\n\r\n\tfunction getArchiveEngine() {\r\n\t\tconst checked = document.querySelector( 'input[name=\"archiveEngine\"]:checked' );\r\n\t\treturn checked ? checked.value : 'php';\r\n\t}\r\n\r\n\tfunction renderGroups( selectEl, data ) {\r\n\t\tselectEl.innerHTML = '';\r\n\t\tdata.forEach( ( g ) => {\r\n\t\t\tconst opt = document.createElement( 'option' );\r\n\t\t\topt.value = String( g.index );\r\n\t\t\topt.textContent = g.title;\r\n\t\t\tselectEl.appendChild( opt );\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction renderFolders( selectEl, subfolders ) {\r\n\t\tselectEl.innerHTML = '';\r\n\t\tif ( !subfolders.length ) {\r\n\t\t\tselectEl.innerHTML = `<option value=\"\">No subfolders found</option>`;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsubfolders.forEach( sf => {\r\n\t\t\tconst opt = document.createElement( 'option' );\r\n\t\t\topt.value = sf.name;\r\n\t\t\topt.textContent = sf.name;\r\n\t\t\tselectEl.appendChild( opt );\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction renderDatabases( selectEl, dbs ) {\r\n\t\tselectEl.innerHTML = '';\r\n\t\tif ( !dbs.length ) {\r\n\t\t\tselectEl.innerHTML = `<option value=\"\">No databases found</option>`;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdbs.forEach( name => {\r\n\t\t\tconst opt = document.createElement( 'option' );\r\n\t\t\topt.value = name;\r\n\t\t\topt.textContent = name;\r\n\t\t\tselectEl.appendChild( opt );\r\n\t\t} );\r\n\t}\r\n\r\n\t// Initial loads\r\n\trefreshCsrf();\r\n\r\n\tfetch( `${ window.BASE_URL }utils/export_files.php?action=scan`, {credentials: 'same-origin'} )\r\n\t\t.then( r => r.json() )\r\n\t\t.then( data => {\r\n\t\t\tif ( !data.ok ) {\r\n\t\t\t\tthrow new Error( data.error || 'Failed to scan folders' );\r\n\t\t\t}\r\n\r\n\t\t\tgroups = data.groups || [];\r\n\r\n\t\t\tif ( !groups.length ) {\r\n\t\t\t\t// Graceful empty state\r\n\t\t\t\tgroupEl.innerHTML = `<option value=\"\">No folders defined</option>`;\r\n\t\t\t\tgroupEl.disabled = true;\r\n\r\n\t\t\t\tfolderEl.innerHTML = `<option value=\"\">No subfolders</option>`;\r\n\t\t\t\tfolderEl.disabled = true;\r\n\r\n\t\t\t\tif ( filesStatus ) {\r\n\t\t\t\t\tfilesStatus.innerHTML = 'No folders defined. Add entries to <code>config/folders.json</code> to enable file exports.';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uploadsModeRow ) {\r\n\t\t\t\t\tuploadsModeRow.style.display = 'none';\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn; // stop here\r\n\t\t\t}\r\n\r\n\t\t\trenderGroups( groupEl, groups );\r\n\t\t\tif ( groupEl.options.length ) {\r\n\t\t\t\tgroupEl.dispatchEvent( new Event( 'change' ) );\r\n\t\t\t}\r\n\t\t} )\r\n\t\t.catch( err => {\r\n\t\t\tconsole.error( err );\r\n\t\t\tgroupEl.innerHTML = `<option value=\"\">Error loading groups</option>`;\r\n\t\t\tgroupEl.disabled = true;\r\n\t\t\tfolderEl.innerHTML = `<option value=\"\">â€”</option>`;\r\n\t\t\tfolderEl.disabled = true;\r\n\t\t} );\r\n\r\n\tfetch( `${ window.BASE_URL }utils/export_files.php?action=dbs`, {credentials: 'same-origin'} )\r\n\t\t.then( r => r.json() )\r\n\t\t.then( data => {\r\n\t\t\tif ( !data.ok ) {\r\n\t\t\t\tthrow new Error( data.error || 'Failed to list databases' );\r\n\t\t\t}\r\n\t\t\trenderDatabases( dbSelect, data.databases || [] );\r\n\t\t} )\r\n\t\t.catch( err => {\r\n\t\t\tconsole.error( err );\r\n\t\t\tdbSelect.innerHTML = `<option value=\"\">Error loading databases</option>`;\r\n\t\t} );\r\n\r\n\t// Events\r\n\tgroupEl.addEventListener( 'change', () => {\r\n\t\tconst idx = parseInt( groupEl.value, 10 );\r\n\t\tconst group = Number.isNaN( idx ) ? null : groups[idx];\r\n\r\n\t\t// Reset UI\r\n\t\tfolderEl.disabled = true;\r\n\t\tfolderEl.innerHTML = `<option value=\"\">Select a group firstâ€¦</option>`;\r\n\t\tif ( uploadsModeRow ) {\r\n\t\t\tuploadsModeRow.style.display = 'none';\r\n\t\t}\r\n\r\n\t\tconst def = document.querySelector( 'input[name=\"uploadsMode\"][value=\"exclude\"]' );\r\n\t\tif ( def ) def.checked = true;\r\n\r\n\t\tif ( !group ) return;\r\n\r\n\t\trenderFolders( folderEl, group.subfolders );\r\n\t\tfolderEl.disabled = (group.subfolders.length === 0);\r\n\r\n\t\t// Auto-select first folder and trigger its change\r\n\t\tif ( group.subfolders.length > 0 ) {\r\n\t\t\tfolderEl.selectedIndex = 0;\r\n\t\t\tfolderEl.dispatchEvent( new Event( 'change' ) );\r\n\t\t}\r\n\t} );\r\n\r\n\tfolderEl.addEventListener( 'change', () => {\r\n\t\tconst gIdx = parseInt( groupEl.value, 10 );\r\n\t\tconst group = Number.isNaN( gIdx ) ? null : groups[gIdx];\r\n\t\tif ( !group ) return;\r\n\r\n\t\tconst sf = group.subfolders.find( s => s.name === folderEl.value );\r\n\t\tconst showUploads = !!(sf && sf.isWordPress && sf.hasUploads);\r\n\r\n\t\tif ( uploadsModeRow ) {\r\n\t\t\tuploadsModeRow.style.display = showUploads ? '' : 'none';\r\n\t\t}\r\n\r\n\t\t// default to exclude on change\r\n\t\tconst def = document.querySelector( 'input[name=\"uploadsMode\"][value=\"exclude\"]' );\r\n\t\tif ( def ) def.checked = true;\r\n\t} );\r\n\r\n\tfilesForm.addEventListener( 'submit', e => {\r\n\t\te.preventDefault();\r\n\t\tfilesStatus.textContent = 'Preparing archiveâ€¦';\r\n\r\n\t\tconst form = new FormData( filesForm );\r\n\t\tform.append( 'action', 'zip' );\r\n\t\tform.append( 'engine', getArchiveEngine() ); // php | external\r\n\r\n\t\tfetch( `${ window.BASE_URL }utils/export_files.php`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: form,\r\n\t\t\tcredentials: 'same-origin'\r\n\t\t} )\r\n\t\t\t.then( r => r.json() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tif ( !data.ok ) throw new Error( data.error || 'Export failed' );\r\n\r\n\t\t\t\tlet html = `Done. <a href=\"${ window.BASE_URL }${ data.href }\" download=\"${ data.name }\">${ data.name }</a>`;\r\n\t\t\t\tif ( data.message ) {\r\n\t\t\t\t\thtml += `<br><small class=\"muted\">${ data.message }</small>`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilesStatus.innerHTML = html;\r\n\t\t\t\twindow.location.href = `${ window.BASE_URL }${ data.href }`;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} )\r\n\t\t\t.catch( err => {\r\n\t\t\t\tconsole.error( err );\r\n\t\t\t\tfilesStatus.textContent = 'Error: ' + err.message;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} );\r\n\t} );\r\n\r\n\tdbForm.addEventListener( 'submit', e => {\r\n\t\te.preventDefault();\r\n\t\tdbStatus.textContent = 'Dumping databaseâ€¦';\r\n\r\n\t\tconst form = new FormData( dbForm );\r\n\t\tform.append( 'action', 'dumpdb' );\r\n\t\tform.append( 'engine', getArchiveEngine() ); // php | external\r\n\r\n\t\tfetch( `${ window.BASE_URL }utils/export_files.php`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: form,\r\n\t\t\tcredentials: 'same-origin'\r\n\t\t} )\r\n\t\t\t.then( r => r.json() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tif ( !data.ok ) {\r\n\t\t\t\t\tthrow new Error( data.error || 'DB export failed' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet html = `Done. <a href=\"${ window.BASE_URL }${ data.href }\" download=\"${ data.name }\">${ data.name }</a>`;\r\n\t\t\t\tif ( data.message ) {\r\n\t\t\t\t\thtml += `<br><small class=\"muted\">${ data.message }</small>`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdbStatus.innerHTML = html;\r\n\t\t\t\twindow.location.href = `${ window.BASE_URL }${ data.href }`;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} )\r\n\t\t\t.catch( err => {\r\n\t\t\t\tconsole.error( err );\r\n\t\t\t\tdbStatus.textContent = 'Error: ' + err.message;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} );\r\n\t} );\r\n}\r\n","// assets/js/modules/htmlSyntaxEditor.js\r\n\r\n/* Public API\r\n * ----------\r\n * import { attachHtmlEditor } from './htmlSyntaxEditor.js';\r\n *\r\n * const api = attachHtmlEditor( editorEl, {\r\n *   placeholder : 'HTML Template',\r\n *   onChange    : ( value ) => { /* value is plain text, ZWSP stripped * / },\r\n * });\r\n *\r\n * api.getValue();         // -> plain text (no ZWSP)\r\n * api.setValue( text );   // replace content (plain text)\r\n * api.destroy();          // remove listeners\r\n */\r\n\r\nexport function attachHtmlEditor( editor, opts = {} ) {\r\n\tconst PLACEHOLDER = opts.placeholder || 'HTML Template';\r\n\tlet lastText = '';\r\n\tlet renderScheduled = false;\r\n\tlet allowFocusEscape = false; // â† Esc sets this true to let Tab move focus\r\n\r\n\t// Set base attributes once\r\n\teditor.setAttribute( 'contenteditable', 'true' );\r\n\teditor.setAttribute( 'role', 'textbox' );\r\n\teditor.setAttribute( 'aria-multiline', 'true' );\r\n\teditor.setAttribute( 'aria-label', PLACEHOLDER );\r\n\teditor.setAttribute( 'aria-describedby', opts.describedBy || 'editor-instructions' );\r\n\teditor.setAttribute( 'placeholder', PLACEHOLDER );\r\n\teditor.setAttribute( 'spellcheck', 'false' );\r\n\teditor.setAttribute( 'autocomplete', 'off' );\r\n\teditor.setAttribute( 'autocapitalize', 'off' );\r\n\teditor.setAttribute( 'autocorrect', 'off' );\r\n\r\n\tfunction getPlainText() {\r\n\t\t// normalise NBSP, strip zero-width spaces\r\n\t\treturn editor.textContent.replace( /\\u200B/g, '' ).replace( /\\u00A0/g, ' ' );\r\n\t}\r\n\r\n\tfunction saveCaretPosition( element ) {\r\n\t\tconst sel = window.getSelection();\r\n\t\tif ( !sel.rangeCount ) return null;\r\n\t\tconst range = sel.getRangeAt( 0 );\r\n\t\tconst pre = range.cloneRange();\r\n\t\tpre.selectNodeContents( element );\r\n\t\tpre.setEnd( range.endContainer, range.endOffset );\r\n\t\tconst len = element.textContent.length;\r\n\t\treturn Math.min( pre.toString().length, len );\r\n\t}\r\n\r\n\tfunction restoreCaretPosition( element, position ) {\r\n\t\tconst sel = window.getSelection();\r\n\t\tconst range = document.createRange();\r\n\t\tlet current = 0;\r\n\t\tlet lastTextNode = null;\r\n\t\tconst walker = document.createTreeWalker( element, NodeFilter.SHOW_TEXT, null, false );\r\n\r\n\t\twhile ( walker.nextNode() ) {\r\n\t\t\tconst node = walker.currentNode;\r\n\t\t\tconst len = node.nodeValue.length;\r\n\t\t\tlastTextNode = node;\r\n\t\t\tif ( current + len >= position ) {\r\n\t\t\t\trange.setStart( node, position - current );\r\n\t\t\t\trange.collapse( true );\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\tsel.addRange( range );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcurrent += len;\r\n\t\t}\r\n\r\n\t\tif ( !lastTextNode ) {\r\n\t\t\tconst empty = document.createTextNode( '' );\r\n\t\t\telement.appendChild( empty );\r\n\t\t\tlastTextNode = empty;\r\n\t\t}\r\n\t\trange.setStart( lastTextNode, lastTextNode.nodeValue.length );\r\n\t\trange.collapse( true );\r\n\t\tsel.removeAllRanges();\r\n\t\tsel.addRange( range );\r\n\t}\r\n\r\n\tfunction highlightHTML( text ) {\r\n\t\tconst escaped = text\r\n\t\t\t.replace( /&/g, '&amp;' )\r\n\t\t\t.replace( /</g, '&lt;' )\r\n\t\t\t.replace( />/g, '&gt;' );\r\n\r\n\t\treturn escaped.replace( /&lt;\\/?[a-zA-Z][^&]*?&gt;/g, match => {\r\n\t\t\tlet inner = match.slice( 4, -4 ).trim();\r\n\t\t\tlet isClosing = false;\r\n\t\t\tlet selfClosing = false;\r\n\r\n\t\t\tif ( inner.startsWith( '/' ) ) {\r\n\t\t\t\tisClosing = true;\r\n\t\t\t\tinner = inner.slice( 1 ).trim();\r\n\t\t\t}\r\n\t\t\tif ( inner.endsWith( '/' ) ) {\r\n\t\t\t\tselfClosing = true;\r\n\t\t\t\tinner = inner.slice( 0, -1 ).trim();\r\n\t\t\t}\r\n\r\n\t\t\tconst firstSpace = inner.search( /\\s/ );\r\n\t\t\tconst tagName = (firstSpace === -1 ? inner : inner.slice( 0, firstSpace )).toLowerCase();\r\n\t\t\tlet rest = firstSpace === -1 ? '' : inner.slice( firstSpace ).trim();\r\n\r\n\t\t\trest = rest.replace(\r\n\t\t\t\t/([a-zA-Z_:][-a-zA-Z0-9_:.]*)\\s*(=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+))?/g,\r\n\t\t\t\t( _, name, eqPart ) => {\r\n\t\t\t\t\tif ( !name ) return _;\r\n\t\t\t\t\tif ( !eqPart ) return `<span class=\"attr\">${ name }</span>`;\r\n\t\t\t\t\tconst m = eqPart.match( /^=\\s*(?:\"([^\"]*)\"|'([^']*)'|([^\\s'\">=]+))/ );\r\n\t\t\t\t\tif ( !m ) return `<span class=\"attr\">${ name }</span>${ eqPart || '' }`;\r\n\r\n\t\t\t\t\tconst value = m[1] ?? m[2] ?? m[3] ?? '';\r\n\t\t\t\t\tconst quote = m[1] ? '\"' : (m[2] ? \"'\" : '');\r\n\r\n\t\t\t\t\treturn quote\r\n\t\t\t\t\t\t? `<span class=\"attr\">${ name }</span>=<span class=\"value\">${ quote }${ value }${ quote }</span>`\r\n\t\t\t\t\t\t: `<span class=\"attr\">${ name }</span>=<span class=\"value\">${ value }</span>`;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tconst open = `<span class=\"pun\">&lt;${ isClosing ? '/' : '' }</span>`;\r\n\t\t\tconst t = `<span class=\"tag\">${ tagName }</span>`;\r\n\t\t\tconst body = rest ? ` ${ rest }` : '';\r\n\t\t\tconst close = `<span class=\"pun\">${ selfClosing ? ' /' : '' }&gt;</span>`;\r\n\t\t\treturn `${ open }${ t }${ body }${ close }`;\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction renderHighlight() {\r\n\t\trenderScheduled = false;\r\n\r\n\t\tconst raw = getPlainText();\r\n\t\tif ( raw === lastText ) return;\r\n\r\n\t\tconst caretPos = saveCaretPosition( editor );\r\n\r\n\t\tlet html = raw;\r\n\t\t// Chromium collapses trailing \\n in editable <pre>\r\n\t\tif ( html.endsWith( '\\n' ) && !html.endsWith( '\\n\\u200B' ) ) {\r\n\t\t\thtml += '\\u200B';\r\n\t\t}\r\n\r\n\t\teditor.innerHTML = highlightHTML( html );\r\n\r\n\t\t// Re-assert placeholder attribute (innerHTML wipes it on some engines)\r\n\t\tif ( !editor.hasAttribute( 'placeholder' ) ) {\r\n\t\t\teditor.setAttribute( 'placeholder', PLACEHOLDER );\r\n\t\t}\r\n\r\n\t\t// Ensure a tail text node only when content exists\r\n\t\tif ( raw.length > 0 && (!editor.lastChild || editor.lastChild.nodeType !== Node.TEXT_NODE) ) {\r\n\t\t\teditor.appendChild( document.createTextNode( '' ) );\r\n\t\t}\r\n\r\n\t\tif ( caretPos != null ) restoreCaretPosition( editor, caretPos );\r\n\r\n\t\tlastText = raw;\r\n\t\topts.onChange && opts.onChange( raw );\r\n\t}\r\n\r\n\tfunction scheduleRender() {\r\n\t\tif ( !renderScheduled ) {\r\n\t\t\trenderScheduled = true;\r\n\t\t\trequestAnimationFrame( () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\trenderHighlight();\r\n\t\t\t\t} finally {\r\n\t\t\t\t\trenderScheduled = false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\t}\r\n\r\n\t// PASTE as plain text\r\n\tfunction setTextAtCaret( text ) {\r\n\t\tconst plain = getPlainText();\r\n\t\tconst pos = saveCaretPosition( editor ) ?? plain.length;\r\n\t\tconst newText = plain.slice( 0, pos ) + text + plain.slice( pos );\r\n\t\teditor.textContent = newText;\r\n\t\trestoreCaretPosition( editor, pos + text.length );\r\n\t\tlastText = '';\r\n\t\trenderHighlight();\r\n\t}\r\n\r\n\t// Events\r\n\tfunction onBeforeInput( e ) {\r\n\t\tif ( e.inputType === 'insertFromPaste' && e.clipboardData ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst txt = e.clipboardData.getData( 'text/plain' ).replace( /\\r\\n?/g, '\\n' );\r\n\t\t\tsetTextAtCaret( txt );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onKeyDown( e ) {\r\n\t\t// ESC: next Tab should move focus out (donâ€™t indent)\r\n\t\tif ( e.key === 'Escape' ) {\r\n\t\t\tallowFocusEscape = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// TAB pressed after ESC: let the browser move focus (next/prev control)\r\n\t\tif ( e.key === 'Tab' && allowFocusEscape ) {\r\n\t\t\tallowFocusEscape = false; // consume the escape state\r\n\t\t\treturn; // no preventDefault â†’ native focus navigation\r\n\t\t}\r\n\r\n\t\t// TAB (indent / unindent) â€“ only when not escaping focus\r\n\t\tif ( e.key === 'Tab' ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tconst text = getPlainText();\r\n\t\t\tlet pos = saveCaretPosition( editor );\r\n\t\t\tlet newText = text;\r\n\r\n\t\t\tif ( e.shiftKey ) {\r\n\t\t\t\t// Unindent (quick heuristics for a single cursor)\r\n\t\t\t\tif ( text.slice( pos - 1, pos ) === '\\t' ) {\r\n\t\t\t\t\tnewText = text.slice( 0, pos - 1 ) + text.slice( pos );\r\n\t\t\t\t\tpos -= 1;\r\n\t\t\t\t} else if ( text.slice( pos - 2, pos ) === '  ' ) {\r\n\t\t\t\t\tnewText = text.slice( 0, pos - 2 ) + text.slice( pos );\r\n\t\t\t\t\tpos -= 2;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Indent\r\n\t\t\t\tnewText = text.slice( 0, pos ) + '\\t' + text.slice( pos );\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t\teditor.textContent = newText;\r\n\t\t\trestoreCaretPosition( editor, pos );\r\n\t\t\tlastText = '';\r\n\t\t\trenderHighlight();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// ENTER (manual newline + auto-indent)\r\n\t\tif ( e.key === 'Enter' && !e.shiftKey ) {\r\n\t\t\tconst plain = getPlainText();\r\n\t\t\tif ( plain.length === 0 ) return; // let browser insert first break\r\n\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tlet pos = saveCaretPosition( editor );\r\n\t\t\tconst before = plain.slice( 0, pos );\r\n\t\t\tconst lastLine = before.split( /\\r?\\n/ ).pop() || '';\r\n\t\t\tconst indent = (lastLine.match( /^[\\t ]+/ ) || [ '' ])[0];\r\n\r\n\t\t\tconst insert = '\\n' + indent;\r\n\t\t\tlet newText = plain.slice( 0, pos ) + insert + plain.slice( pos );\r\n\t\t\tlet newPos = pos + insert.length;\r\n\r\n\t\t\tif ( newText === plain ) {\r\n\t\t\t\tnewText = plain + insert;\r\n\t\t\t\tnewPos = plain.length + insert.length;\r\n\t\t\t}\r\n\r\n\t\t\teditor.textContent = newText;\r\n\t\t\teditor.focus();\r\n\t\t\trestoreCaretPosition( editor, newPos );\r\n\t\t\tlastText = '';\r\n\t\t\trenderHighlight();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onInput( e ) {\r\n\t\t// Normalise ghost empties after delete/cut (e.g. <div><br></div>)\r\n\t\tconst isWhitespaceOnly = /^[\\s\\u200B]*$/.test( editor.textContent );\r\n\t\tif ( isWhitespaceOnly && ((e.inputType || '').startsWith( 'delete' ) || e.inputType === 'deleteByCut') ) {\r\n\t\t\teditor.innerHTML = '';\r\n\t\t\tlastText = '';\r\n\t\t\topts.onChange && opts.onChange( '' );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\te.inputType === 'insertParagraph' ||\r\n\t\t\te.inputType === 'insertFromPaste' ||\r\n\t\t\te.inputType === 'insertFromDrop' ||\r\n\t\t\te.inputType === 'historyUndo' ||\r\n\t\t\te.inputType === 'historyRedo'\r\n\t\t) {\r\n\t\t\tlastText = '';\r\n\t\t\trenderHighlight();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tscheduleRender();\r\n\t}\r\n\r\n\tfunction onBlur() {\r\n\t\tallowFocusEscape = false; // leaving the editor cancels escape mode\r\n\t\trenderHighlight();\r\n\t}\r\n\r\n\t// Bind\r\n\teditor.addEventListener( 'beforeinput', onBeforeInput );\r\n\teditor.addEventListener( 'keydown', onKeyDown );\r\n\teditor.addEventListener( 'input', onInput );\r\n\teditor.addEventListener( 'blur', onBlur );\r\n\r\n\t// Initial paint\r\n\trenderHighlight();\r\n\r\n\treturn {\r\n\t\tgetValue() {\r\n\t\t\treturn getPlainText();\r\n\t\t},\r\n\t\tsetValue( text ) {\r\n\t\t\teditor.textContent = (text || '');\r\n\t\t\tlastText = '';\r\n\t\t\trenderHighlight();\r\n\t\t},\r\n\t\tdestroy() {\r\n\t\t\teditor.removeEventListener( 'beforeinput', onBeforeInput );\r\n\t\t\teditor.removeEventListener( 'keydown', onKeyDown );\r\n\t\t\teditor.removeEventListener( 'input', onInput );\r\n\t\t\teditor.removeEventListener( 'blur', onBlur );\r\n\t\t}\r\n\t};\r\n}\r\n","// assets/js/modules/search.js\nexport function initSearch() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tconst searchBar = document.querySelector( '.search-bar' );\n\t\tif ( searchBar ) {\n\t\t\tsearchBar.addEventListener( 'input', searchProjects );\n\t\t}\n\t} );\n}\n\nexport function searchProjects() {\n\tconst input = document.querySelector( '.search-bar' )?.value.toLowerCase() || '';\n\tconst items = document.querySelectorAll( '#folders-view .columns li' );\n\n\titems.forEach( item => {\n\t\tconst text = item.textContent.toLowerCase();\n\t\titem.style.display = text.includes( input ) ? '' : 'none';\n\t} );\n}\n","// assets/js/modules/settings.js\r\nconst STORAGE_PREFIXES = [ 'theme', 'columnOrder', 'accordion_', 'width_' ];\r\n\r\nexport function initClearStorageButton() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst clearBtn = document.getElementById( 'clear-local-storage' );\r\n\t\tif ( !clearBtn ) return;\r\n\r\n\t\tclearBtn.addEventListener( 'click', () => {\r\n\t\t\tif ( !confirm( 'Are you sure you want to reset saved UI settings?' ) ) return;\r\n\r\n\t\t\tObject.keys( localStorage )\r\n\t\t\t\t.filter( key => STORAGE_PREFIXES.some( prefix => key.startsWith( prefix ) ) )\r\n\t\t\t\t.forEach( key => localStorage.removeItem( key ) );\r\n\r\n\t\t\talert( 'Saved settings have been cleared from local storage.' );\r\n\t\t\tlocation.reload();\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\nexport function autoHideConfirmationMessage() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst msg = document.querySelector( '.post-confirmation-container' );\r\n\t\tif ( !msg ) return;\r\n\r\n\t\tsetTimeout( () => {\r\n\t\t\tmsg.style.transition = 'opacity 0.5s ease';\r\n\t\t\tmsg.style.opacity = '0';\r\n\t\t\tsetTimeout( () => msg.remove(), 500 );\r\n\t\t}, 3000 );\r\n\t} );\r\n}\r\n","// assets/js/modules/theme.js\r\nexport function initThemeSwitcher() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst selector = document.querySelector( '#theme-selector' );\r\n\t\tif ( !selector ) return;\r\n\r\n\t\t// Use serverTheme first, then fallback to default\r\n\t\tconst saved =\r\n\t\t\tlocalStorage.getItem( 'theme' ) ||\r\n\t\t\t(typeof serverTheme !== 'undefined' ? serverTheme : 'default');\r\n\r\n\t\tsetTheme( saved );\r\n\t\tselector.value = saved;\r\n\r\n\t\tselector.addEventListener( 'change', ( e ) => {\r\n\t\t\tconst selected = e.target.value;\r\n\t\t\tsetTheme( selected );\r\n\t\t\tlocalStorage.setItem( 'theme', selected );\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\nfunction setTheme( theme ) {\r\n\tconst root = document.documentElement;\r\n\r\n\t// Remove any existing *-theme classes\r\n\troot.className = root.className\r\n\t\t.split( /\\s+/ )\r\n\t\t.filter( ( cls ) => cls && !cls.endsWith( '-theme' ) )\r\n\t\t.join( ' ' );\r\n\r\n\tif ( theme !== 'default' ) {\r\n\t\troot.classList.add( `${ theme }-theme` );\r\n\t}\r\n\r\n\t// Default to dark mode\r\n\tlet colorScheme = 'dark';\r\n\tif ( !document.body.classList.contains( 'dark-mode' ) ) {\r\n\t\tdocument.body.classList.remove( 'light-mode' );\r\n\t\tdocument.body.classList.add( 'dark-mode' );\r\n\t}\r\n\r\n\t// Apply light mode if defined in themeTypes\r\n\tif ( typeof themeTypes !== 'undefined' && themeTypes[theme] === 'light' ) {\r\n\t\tcolorScheme = 'light';\r\n\t\tif ( !document.body.classList.contains( 'light-mode' ) ) {\r\n\t\t\tdocument.body.classList.remove( 'dark-mode' );\r\n\t\t\tdocument.body.classList.add( 'light-mode' );\r\n\t\t}\r\n\t}\r\n\r\n\t// Update or create <meta name=\"color-scheme\">\r\n\tlet meta = document.querySelector( 'meta[name=\"color-scheme\" ]' );\r\n\tif ( !meta ) {\r\n\t\tmeta = document.createElement( 'meta' );\r\n\t\tmeta.setAttribute( 'name', 'color-scheme' );\r\n\t\tdocument.head.appendChild( meta );\r\n\t}\r\n\tif ( meta.getAttribute( 'content' ) !== colorScheme ) {\r\n\t\tmeta.setAttribute( 'content', colorScheme );\r\n\t}\r\n}\r\n","// assets/js/modules/vhosts.js\nexport function setupVhostCertButtons() {\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\t\tbindButtons();\n\t\t\tsetupFiltering();\n\t\t\tsetupOpenFolder();\n\t\t} );\n\t} else {\n\t\tbindButtons();\n\t\tsetupFiltering();\n\t\tsetupOpenFolder();\n\t}\n}\n\nfunction bindButtons() {\n\tconst buttons = document.querySelectorAll( '[data-generate-cert]' );\n\n\tbuttons.forEach( button => {\n\t\tbutton.addEventListener( 'click', () => {\n\t\t\tconst name = button.dataset.generateCert;\n\t\t\tif ( confirm( 'Generate a new SSL certificate for ' + name + '?' ) ) {\n\t\t\t\tfetch( `${ window.BASE_URL }utils/generate_cert.php?name=${ encodeURIComponent( name ) }` )\n\t\t\t\t\t.then( res => res.text() )\n\t\t\t\t\t.then( msg => {\n\t\t\t\t\t\talert( msg );\n\t\t\t\t\t\tif ( msg.includes( 'successfully' ) ) {\n\t\t\t\t\t\t\tconst restartBtn = document.getElementById( 'restart-apache' );\n\t\t\t\t\t\t\tif ( restartBtn ) restartBtn.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t} )\n\t\t\t\t\t.catch( () => alert( 'Failed to run cert script.' ) );\n\t\t\t}\n\t\t} );\n\t} );\n}\n\nfunction setupFiltering() {\n\tconst filter = document.getElementById( 'vhost-filter' );\n\tconst rows = document.querySelectorAll( '#vhosts-table tbody tr' );\n\n\tif ( !filter || !rows.length ) return;\n\n\tfilter.addEventListener( 'change', () => {\n\t\tconst value = filter.value;\n\t\tlet visibleCount = 0;\n\n\t\trows.forEach( row => {\n\t\t\tconst isSSL = row.classList.contains( 'vhost-ssl' );\n\t\t\tconst hasCert = row.classList.contains( 'cert-valid' );\n\t\t\tconst hasHost = row.classList.contains( 'host-valid' );\n\n\t\t\tlet show = true;\n\t\t\tif ( value === 'missing-cert' ) show = !hasCert;\n\t\t\telse if ( value === 'missing-host' ) show = !hasHost;\n\t\t\telse if ( value === 'ssl-only' ) show = isSSL;\n\t\t\telse if ( value === 'non-ssl' ) show = !isSSL;\n\n\t\t\trow.style.display = show ? '' : 'none';\n\t\t\tif ( show ) visibleCount++;\n\t\t} );\n\n\t\tconst emptyMsg = document.getElementById( 'vhost-empty-msg' );\n\t\tif ( emptyMsg ) {\n\t\t\temptyMsg.style.display = visibleCount === 0 ? '' : 'none';\n\t\t}\n\t} );\n}\n\nfunction setupOpenFolder() {\n\tdocument.addEventListener( 'click', e => {\n\t\tif ( e.target.matches( '.open-folder' ) ) {\n\t\t\tconst path = e.target.dataset.path.replace( /^\"(.*)\"$/, '$1' );\n\t\t\tif ( path ) {\n\t\t\t\tfetch( `${ window.BASE_URL }utils/open_folder.php`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify( {path} )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t} );\n}\n","// assets/js/modules/collapseToggle.js\r\nexport function initCollapseToggle() {\r\n\tfunction resolveTarget( button ) {\r\n\t\tconst customSelector = button.getAttribute( 'data-target-selector' );\r\n\t\tconst region = button.getAttribute( 'data-collapse-region' ) || 'custom';\r\n\r\n\t\tif ( customSelector ) {\r\n\t\t\treturn document.querySelector( customSelector );\r\n\t\t}\r\n\r\n\t\tif ( region === 'header' ) {\r\n\t\t\treturn document.querySelector( 'header[role=\"banner\"]' ) || document.querySelector( 'header' );\r\n\t\t}\r\n\r\n\t\tif ( region === 'footer' ) {\r\n\t\t\treturn document.querySelector( 'footer' );\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction setState( button, target, collapsed ) {\r\n\t\tconst region = button.getAttribute( 'data-collapse-region' ) || 'custom';\r\n\t\tconst labelExpanded = button.getAttribute( 'data-label-expanded' ) || 'Collapse section';\r\n\t\tconst labelCollapsed = button.getAttribute( 'data-label-collapsed' ) || 'Expand section';\r\n\t\tconst srSpan = button.querySelector( '.collapse-toggle-label' );\r\n\r\n\t\tbutton.setAttribute( 'data-state', collapsed ? 'collapsed' : 'expanded' );\r\n\t\tbutton.setAttribute( 'aria-expanded', collapsed ? 'false' : 'true' );\r\n\t\tbutton.setAttribute( 'aria-label', collapsed ? labelCollapsed : labelExpanded );\r\n\r\n\t\tif ( srSpan ) {\r\n\t\t\tsrSpan.textContent = collapsed ? labelCollapsed : labelExpanded;\r\n\t\t}\r\n\r\n\t\tif ( target ) {\r\n\t\t\tif ( collapsed ) {\r\n\t\t\t\ttarget.classList.add( 'is-collapsed' );\r\n\t\t\t\ttarget.classList.remove( 'is-open' );\r\n\t\t\t} else {\r\n\t\t\t\ttarget.classList.remove( 'is-collapsed' );\r\n\t\t\t\ttarget.classList.add( 'is-open' );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( region === 'header' || region === 'footer' ) {\r\n\t\t\tconst body = document.body;\r\n\t\t\tbody.classList.toggle( `${ region }-collapsed`, collapsed );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bind() {\r\n\t\tconst buttons = document.querySelectorAll( '.collapse-toggle' );\r\n\r\n\t\tif ( !buttons.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tbuttons.forEach( ( button ) => {\r\n\t\t\t// Initial state: expanded.\r\n\t\t\tbutton.setAttribute( 'data-state', 'expanded' );\r\n\t\t\tbutton.setAttribute( 'aria-expanded', 'true' );\r\n\r\n\t\t\tbutton.addEventListener( 'click', ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tconst target = resolveTarget( button );\r\n\t\t\t\tconst collapsed = button.getAttribute( 'data-state' ) === 'collapsed';\r\n\r\n\t\t\t\tsetState( button, target, !collapsed );\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\tif ( document.readyState === 'loading' ) {\r\n\t\tdocument.addEventListener( 'DOMContentLoaded', bind );\r\n\t} else {\r\n\t\tbind();\r\n\t}\r\n}\r\n","// assets/js/main.js\nimport '../scss/style.scss';\n\nimport {initToggleAccordion} from './modules/accordion.js';\nimport {toggleApache} from './modules/apache.js';\nimport {initCollapseToggle} from './modules/collapseToggle.js';\nimport {setColumnWidth, cycleColumnWidth, initColumnFeatures} from './modules/columns.js';\nimport {initClock} from './modules/clock.js';\nimport {initDockConfig} from './modules/dock.js';\nimport {initApacheErrorLog, initPhpErrorLog} from './modules/error.js';\nimport {initExportModule} from './modules/export.js';\nimport {initFoldersConfig} from './modules/folders.js';\nimport {initLinkTemplates} from './modules/linkTemplates.js';\nimport {initSearch} from './modules/search.js';\nimport {initClearStorageButton} from './modules/settings.js';\nimport {autoHideConfirmationMessage} from './modules/settings.js';\nimport {initSystemMonitoring} from './modules/system.js';\nimport {initThemeSwitcher} from './modules/theme.js';\nimport {setupVhostCertButtons} from './modules/vhosts.js';\nimport {initViewToggles} from './modules/view.js';\n\n// Initialise on page load\ninitCollapseToggle();\ninitColumnFeatures();\ninitClock();\ninitDockConfig();\ninitFoldersConfig();\ninitLinkTemplates();\ninitApacheErrorLog();\ninitPhpErrorLog();\ninitExportModule();\ninitSearch();\ninitClearStorageButton();\nautoHideConfirmationMessage();\ninitSystemMonitoring();\ninitThemeSwitcher();\nsetupVhostCertButtons();\ninitToggleAccordion();\ninitViewToggles();\n","// assets/js/modules/dock.js\r\nimport {enableDragSort} from './drag.js';\r\n\r\nexport function initDockConfig() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst dockList = document.getElementById( 'dock-list' );\r\n\t\tconst addBtn = document.getElementById( 'add-dock-item' );\r\n\t\tconst form = document.querySelector( '#settings-view form' );\r\n\r\n\t\tif ( !dockList || !addBtn || !form ) return;\r\n\r\n\t\t// Load current config\r\n\t\tfetch( `${ window.BASE_URL }utils/read_config.php?file=dock`, {cache: 'no-store'} )\r\n\t\t\t.then( res => res.json() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tdata.forEach( addDockItem );\r\n\t\t\t\tenableDragSort( '#dock-list' );\r\n\r\n\t\t\t\t// When user reorders items, refresh hidden input\r\n\t\t\t\tdockList.addEventListener( 'sorted', updateInput );\r\n\t\t\t\tupdateInput();\r\n\t\t\t} );\r\n\r\n\t\taddBtn.addEventListener( 'click', () => {\r\n\t\t\taddDockItem();\r\n\t\t\t// enableDragSort is idempotent now; it will only bind to new child\r\n\t\t\tenableDragSort( '#dock-list' );\r\n\t\t\tupdateInput();\r\n\t\t} );\r\n\r\n\t\tfunction addDockItem( item = {} ) {\r\n\t\t\tconst li = document.createElement( 'li' );\r\n\t\t\tli.className = 'dock-item';\r\n\t\t\tli.innerHTML = `\r\n\t\t\t\t<input type=\"text\" placeholder=\"Label\" value=\"${ item.label || '' }\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"URL\" value=\"${ item.url || '' }\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"Icon\" value=\"${ item.icon || '' }\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"Alt Text\" value=\"${ item.alt || '' }\">\r\n\t\t\t\t<button type=\"button\" class=\"remove-dock-item\">âŒ</button>\r\n\t\t\t`;\r\n\t\t\tdockList.appendChild( li );\r\n\r\n\t\t\tli.querySelector( '.remove-dock-item' ).addEventListener( 'click', () => {\r\n\t\t\t\tli.remove();\r\n\t\t\t\tupdateInput();\r\n\t\t\t} );\r\n\r\n\t\t\tArray.from( li.querySelectorAll( 'input' ) ).forEach( ( input ) => {\r\n\t\t\t\tinput.addEventListener( 'input', updateInput );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction updateInput() {\r\n\t\t\tconst dockItems = [];\r\n\t\t\tArray.from( dockList.children ).forEach( ( li ) => {\r\n\t\t\t\tconst inputs = li.querySelectorAll( 'input' );\r\n\t\t\t\tif ( inputs.length < 4 ) return;\r\n\t\t\t\tdockItems.push( {\r\n\t\t\t\t\tlabel: inputs[0].value.trim(),\r\n\t\t\t\t\turl: inputs[1].value.trim(),\r\n\t\t\t\t\ticon: inputs[2].value.trim(),\r\n\t\t\t\t\talt: inputs[3].value.trim()\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t\tconst dockJsonInput = document.getElementById( 'dock_json_input' );\r\n\t\t\tif ( dockJsonInput ) {\r\n\t\t\t\tdockJsonInput.value = JSON.stringify( dockItems, null, 2 );\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n}\r\n","// assets/js/modules/folders.js\r\nimport {enableDragSort} from './drag.js';\r\n\r\nexport function initFoldersConfig() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst list = document.getElementById( 'folders-config-list' );\r\n\t\tconst addBtn = document.getElementById( 'add-folder-column' );\r\n\t\tconst jsonInput = document.getElementById( 'folders_json_input' );\r\n\t\tif ( !list || !addBtn || !jsonInput ) return;\r\n\r\n\t\tlet linkTemplates = [];\r\n\t\tlet templateOptionsHtml = `<option value=\"\">(none)</option>`;\r\n\t\tlet dirty = false;\r\n\t\tlet debounceTimer = null;\r\n\r\n\t\t// helpers for specialCases (object map <-> rows)\r\n\r\n\t\tfunction mapToRows( scMap ) {\r\n\t\t\tif ( scMap && typeof scMap === 'object' && !Array.isArray( scMap ) ) {\r\n\t\t\t\treturn Object.entries( scMap ).map( ( [ match, replace ] ) => ({\r\n\t\t\t\t\tmatch: String( match ?? '' ),\r\n\t\t\t\t\treplace: String( replace ?? '' )\r\n\t\t\t\t}) );\r\n\t\t\t}\r\n\t\t\treturn []; // default if missing/invalid\r\n\t\t}\r\n\r\n\t\tfunction rowsToMap( rows ) {\r\n\t\t\tconst map = {};\r\n\t\t\trows.forEach( ( {match = '', replace = ''} ) => {\r\n\t\t\t\tconst m = String( match ).trim();\r\n\t\t\t\tconst r = String( replace ).trim();\r\n\t\t\t\tif ( m.length || r.length ) {\r\n\t\t\t\t\tmap[m] = r; // later duplicates overwrite earlier â€” deterministic\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\treturn map;\r\n\t\t}\r\n\r\n\t\t// templates\r\n\r\n\t\tfunction fetchLinkTemplates() {\r\n\t\t\tif ( Array.isArray( window.LINK_TEMPLATES ) ) {\r\n\t\t\t\tlinkTemplates = window.LINK_TEMPLATES\r\n\t\t\t\t\t.map( t => t && typeof t.name === 'string' ? t.name.trim() : '' )\r\n\t\t\t\t\t.filter( Boolean );\r\n\t\t\t\tlinkTemplates = Array.from( new Set( linkTemplates ) );\r\n\t\t\t\ttemplateOptionsHtml = `<option value=\"\">(none)</option>` + linkTemplates.map( n => `<option value=\"${ n }\">${ n }</option>` ).join( '' );\r\n\t\t\t\treturn Promise.resolve( linkTemplates );\r\n\t\t\t}\r\n\r\n\t\t\treturn fetch( `${ window.BASE_URL }utils/read_config.php?file=link_templates`, {cache: 'no-store'} )\r\n\t\t\t\t.then( res => res.json() )\r\n\t\t\t\t.then( data => {\r\n\t\t\t\t\tlinkTemplates = (Array.isArray( data ) ? data : [])\r\n\t\t\t\t\t\t.map( t => t && typeof t.name === 'string' ? t.name.trim() : '' )\r\n\t\t\t\t\t\t.filter( Boolean );\r\n\t\t\t\t\tlinkTemplates = Array.from( new Set( linkTemplates ) );\r\n\t\t\t\t\ttemplateOptionsHtml = `<option value=\"\">(none)</option>` + linkTemplates.map( n => `<option value=\"${ n }\">${ n }</option>` ).join( '' );\r\n\t\t\t\t\treturn linkTemplates;\r\n\t\t\t\t} )\r\n\t\t\t\t.catch( () => {\r\n\t\t\t\t\tlinkTemplates = [];\r\n\t\t\t\t\ttemplateOptionsHtml = `<option value=\"\">(none)</option>`;\r\n\t\t\t\t\treturn linkTemplates;\r\n\t\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// rendering\r\n\r\n\t\tfunction specialCaseRowHtml( sc = {} ) {\r\n\t\t\tconst matchVal = sc.match || '';\r\n\t\t\tconst replaceVal = sc.replace || '';\r\n\r\n\t\t\treturn `\r\n\t\t\t\t<div class=\"special-case\">\r\n\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t       class=\"sc-match\"\r\n\t\t\t\t\t       placeholder=\"Match Regex\"\r\n\t\t\t\t\t       aria-label=\"Special case match regex\"\r\n\t\t\t\t\t       value=\"${ matchVal }\">\r\n\r\n\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t       class=\"sc-replace\"\r\n\t\t\t\t\t       placeholder=\"Replace Regex\"\r\n\t\t\t\t\t       aria-label=\"Special case replace regex\"\r\n\t\t\t\t\t       value=\"${ replaceVal }\">\r\n\r\n\t\t\t\t\t<button type=\"button\"\r\n\t\t\t\t\t        class=\"remove-special\"\r\n\t\t\t\t\t        aria-label=\"Remove this special case\">\r\n\t\t\t\t\t\tâœ–\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\tfunction folderItemHtml( item = {} ) {\r\n\t\t\tconst casesHtml = mapToRows( item.specialCases ).map( specialCaseRowHtml ).join( '' );\r\n\t\t\tconst selected = item.linkTemplate || '';\r\n\t\t\tconst uid = `${ Math.random().toString( 36 ).slice( 2 ) }`;\r\n\t\t\tconst labelText = typeof index === 'number'\r\n\t\t\t\t? `Folder ${ index }`\r\n\t\t\t\t: 'Folder';\r\n\r\n\t\t\tconst headingId = `folder-label-${ uid }`;\r\n\r\n\t\t\treturn `\r\n\t\t\t\t<li class=\"folder-config-item\" role=\"group\" aria-labelledby=\"${ headingId }\">\r\n\t\t\t\t\t<h4 id=\"${ headingId }\" class=\"folder-label\">\r\n\t\t\t\t\t\t${ labelText }\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t<div class=\"uid-container\">\r\n\t\t\t\t\t\t<label for=\"title-${ uid }\">Title:</label>\r\n\t\t\t\t\t\t<input id=\"title-${ uid }\"\r\n\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t   data-key=\"title\"\r\n\t\t\t\t\t\t\t   placeholder=\"Title\"\r\n\t\t\t\t\t\t\t   value=\"${ item.title || '' }\">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container\">\r\n\t\t\t\t\t\t<label for=\"href-${ uid }\">Href (optional):</label>\r\n\t\t\t\t\t\t<input id=\"href-${ uid }\"\r\n\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t   data-key=\"href\"\r\n\t\t\t\t\t\t\t   placeholder=\"Href (optional)\"\r\n\t\t\t\t\t\t\t   value=\"${ item.href || '' }\">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container\">\r\n\t\t\t\t\t\t<label for=\"dir-${ uid }\">Dir (relative to HTDOCS_PATH):</label>\r\n\t\t\t\t\t\t<input id=\"dir-${ uid }\"\r\n\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t   data-key=\"dir\"\r\n\t\t\t\t\t\t\t   placeholder=\"Dir (relative to HTDOCS_PATH)\"\r\n\t\t\t\t\t\t\t   value=\"${ item.dir || '' }\">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container\">\r\n\t\t\t\t\t\t<label for=\"excludeList-${ uid }\">Exclude list (comma-separated):</label>\r\n\t\t\t\t\t\t<input id=\"excludeList-${ uid }\"\r\n\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t   data-key=\"excludeList\"\r\n\t\t\t\t\t\t\t   placeholder=\"Exclude list (comma-separated)\"\r\n\t\t\t\t\t\t\t   value=\"${ (item.excludeList || []).join( ',' ) }\">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container grouped-labels\">\r\n\t\t\t\t\t\t<label for=\"match-${ uid }\">Match Regex:</label>\r\n\t\t\t\t\t\t<input id=\"match-${ uid }\"\r\n\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t   data-key=\"match\"\r\n\t\t\t\t\t\t\t   placeholder=\"Match Regex\"\r\n\t\t\t\t\t\t\t   value=\"${ item.urlRules?.match ?? '' }\">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container grouped-labels\">\r\n\t\t\t\t\t\t<label for=\"replace-${ uid }\">Replace Regex:</label>\r\n\t\t\t\t\t\t<input id=\"replace-${ uid }\"\r\n\t\t\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t\t\t   data-key=\"replace\"\r\n\t\t\t\t\t\t\t   placeholder=\"Replace Regex\"\r\n\t\t\t\t\t\t\t   value=\"${ item.urlRules?.replace ?? '' }\">\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container grouped-labels\">\r\n\t\t\t\t\t\t<label for=\"linkTemplate-${ uid }\">Link Template:</label>\r\n\t\t\t\t\t\t<select id=\"linkTemplate-${ uid }\"\r\n\t\t\t\t\t\t\t    class=\"link-template-select\"\r\n\t\t\t\t\t\t\t    name=\"linkTemplate\">\r\n\t\t\t\t\t\t\t${ templateOptionsHtml }\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container grouped-container grouped-labels\" role=\"group\" aria-labelledby=\"folder-behaviour-${ uid }\">\r\n\t\t\t\t\t\t<label id=\"folder-behaviour-${ uid }\">Folder Behaviour:</label>\r\n\r\n\t\t\t\t\t\t<label for=\"disable-links-${ uid }\">\r\n\t\t\t\t\t\t\t<input id=\"disable-links-${ uid }\"\r\n\t\t\t\t\t\t\t       type=\"checkbox\"\r\n\t\t\t\t\t\t\t       class=\"disable-links\"${ item.disableLinks ? ' checked' : '' }>\r\n\t\t\t\t\t\t\tDisable links\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t<label for=\"require-vhost-${ uid }\">\r\n\t\t\t\t\t\t\t<input id=\"require-vhost-${ uid }\"\r\n\t\t\t\t\t\t\t       type=\"checkbox\"\r\n\t\t\t\t\t\t\t       class=\"require-vhost\"${ item.requireVhost ? ' checked' : '' }>\r\n\t\t\t\t\t\t\tValid vHost only\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"uid-container special-cases-wrapper\" aria-labelledby=\"special-cases-${ uid }\">\r\n\t\t\t\t\t\t<span id=\"special-cases-${ uid }\">Special Cases:</span>\r\n\t\t\t\t\t\t<div class=\"special-cases\">${ casesHtml }</div>\r\n\t\t\t\t\t\t<button type=\"button\" class=\"add-special\" aria-label=\"Add special case rule\">âž• Add Rule</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button type=\"button\" class=\"remove-folder-column\" aria-label=\"Remove this folder column\">âŒ</button>\r\n\t\t\t\t</li>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\tfunction renumberFolders() {\r\n\t\t\tlist.querySelectorAll( '.folder-config-item' ).forEach( ( li, index ) => {\r\n\t\t\t\tconst labelEl = li.querySelector( '.folder-label' );\r\n\t\t\t\tif ( labelEl ) {\r\n\t\t\t\t\tlabelEl.textContent = `Folder ${ index + 1 }`;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction appendFolderItems( items ) {\r\n\t\t\tconst frag = document.createDocumentFragment();\r\n\t\t\tconst tmp = document.createElement( 'div' );\r\n\t\t\tconst existingCount = list.querySelectorAll( '.folder-config-item' ).length;\r\n\r\n\t\t\ttmp.innerHTML = items\r\n\t\t\t\t.map( ( item, index ) => folderItemHtml( item, existingCount + index + 1 ) )\r\n\t\t\t\t.join( '' );\r\n\r\n\t\t\tArray.from( tmp.children ).forEach( child => frag.appendChild( child ) );\r\n\t\t\tlist.appendChild( frag );\r\n\r\n\t\t\t// Apply select value + disable state\r\n\t\t\tlist.querySelectorAll( '.folder-config-item' ).forEach( li => {\r\n\t\t\t\tconst select = li.querySelector( '.link-template-select' );\r\n\t\t\t\tif ( select ) {\r\n\t\t\t\t\t// Find the corresponding item by matching the title currently in the li\r\n\t\t\t\t\tconst titleInLi = li.querySelector( 'input[data-key=\"title\"]' )?.value || '';\r\n\t\t\t\t\tconst found = items.find( it => (it.title || '') === titleInLi );\r\n\t\t\t\t\tconst val = found?.linkTemplate || '';\r\n\t\t\t\t\tif ( val ) select.value = val;\r\n\t\t\t\t\tselect.disabled = linkTemplates.length === 0;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\trenumberFolders();\r\n\t\t}\r\n\r\n\t\tfunction addFolderItem( item = {} ) {\r\n\t\t\tconst tmp = document.createElement( 'div' );\r\n\t\t\tconst nextIndex = list.querySelectorAll( '.folder-config-item' ).length + 1;\r\n\t\t\ttmp.innerHTML = folderItemHtml( item, nextIndex );\r\n\t\t\tconst li = tmp.firstElementChild;\r\n\t\t\tlist.appendChild( li );\r\n\t\t\tconst select = li.querySelector( '.link-template-select' );\r\n\t\t\tif ( select ) {\r\n\t\t\t\tselect.disabled = linkTemplates.length === 0;\r\n\t\t\t\tif ( item.linkTemplate ) select.value = item.linkTemplate;\r\n\t\t\t}\r\n\t\t\trenumberFolders();\r\n\t\t\tmarkDirty();\r\n\t\t}\r\n\r\n\t\t// updates\r\n\r\n\t\tfunction markDirty() {\r\n\t\t\tdirty = true;\r\n\t\t\tdebounceUpdate();\r\n\t\t}\r\n\r\n\t\tfunction debounceUpdate() {\r\n\t\t\tif ( debounceTimer ) clearTimeout( debounceTimer );\r\n\t\t\tdebounceTimer = setTimeout( updateInput, 120 );\r\n\t\t}\r\n\r\n\t\tfunction updateInput() {\r\n\t\t\tdebounceTimer = null;\r\n\t\t\tif ( !dirty ) return;\r\n\t\t\tjsonInput.value = JSON.stringify( serializeList(), null, 2 );\r\n\t\t\tdirty = false;\r\n\t\t}\r\n\r\n\t\tfunction serializeList() {\r\n\t\t\tconst items = [];\r\n\t\t\tlist.querySelectorAll( '.folder-config-item' ).forEach( li => {\r\n\t\t\t\tconst get = ( sel ) => li.querySelector( sel );\r\n\r\n\t\t\t\tconst title = get( 'input[data-key=\"title\"]' )?.value.trim() || '';\r\n\t\t\t\tconst href = get( 'input[data-key=\"href\"]' )?.value.trim() || '';\r\n\t\t\t\tconst dir = get( 'input[data-key=\"dir\"]' )?.value.trim() || '';\r\n\t\t\t\tconst excludeStr = get( 'input[data-key=\"excludeList\"]' )?.value || '';\r\n\t\t\t\tconst match = get( 'input[data-key=\"match\"]' )?.value || '';\r\n\t\t\t\tconst replace = get( 'input[data-key=\"replace\"]' )?.value || '';\r\n\t\t\t\tconst linkTemplate = li.querySelector( '.link-template-select' )?.value || '';\r\n\t\t\t\tconst disableLinks = !!li.querySelector( '.disable-links' )?.checked;\r\n\t\t\t\tconst requireVhost = !!li.querySelector( '.require-vhost' )?.checked;\r\n\r\n\t\t\t\t// Collect specialCases from rows and convert back to an object map\r\n\t\t\t\tconst scRows = [];\r\n\t\t\t\tli.querySelectorAll( '.special-case' ).forEach( row => {\r\n\t\t\t\t\tconst m = row.querySelector( '.sc-match' )?.value || '';\r\n\t\t\t\t\tconst r = row.querySelector( '.sc-replace' )?.value || '';\r\n\t\t\t\t\tif ( m.length || r.length ) scRows.push( {match: m, replace: r} );\r\n\t\t\t\t} );\r\n\t\t\t\tconst specialCases = rowsToMap( scRows );\r\n\r\n\t\t\t\tconst excludeList = excludeStr.split( ',' ).map( s => s.trim() ).filter( Boolean );\r\n\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\thref,\r\n\t\t\t\t\tdir,\r\n\t\t\t\t\texcludeList,\r\n\t\t\t\t\turlRules: {match, replace},\r\n\t\t\t\t\tlinkTemplate,\r\n\t\t\t\t\tdisableLinks,\r\n\t\t\t\t\trequireVhost,\r\n\t\t\t\t\tspecialCases\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Skip fully empty rows\r\n\t\t\t\tconst hasValue =\r\n\t\t\t\t\ttitle ||\r\n\t\t\t\t\thref ||\r\n\t\t\t\t\tdir ||\r\n\t\t\t\t\texcludeList.length ||\r\n\t\t\t\t\tmatch ||\r\n\t\t\t\t\treplace ||\r\n\t\t\t\t\tlinkTemplate ||\r\n\t\t\t\t\tdisableLinks ||\r\n\t\t\t\t\trequireVhost ||\r\n\t\t\t\t\tObject.keys( specialCases ).length;\r\n\t\t\t\tif ( hasValue ) items.push( record );\r\n\t\t\t} );\r\n\t\t\treturn items;\r\n\t\t}\r\n\r\n\t\t// delegated events\r\n\r\n\t\tlist.addEventListener( 'input', ( e ) => {\r\n\t\t\tif ( e.target.matches( 'input[type=\"text\"], select' ) ) {\r\n\t\t\t\tmarkDirty();\r\n\t\t\t}\r\n\t\t} );\r\n\t\tlist.addEventListener( 'change', ( e ) => {\r\n\t\t\tif ( e.target.matches( 'select, input[type=\"checkbox\"]' ) ) {\r\n\t\t\t\tmarkDirty();\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tlist.addEventListener( 'click', ( e ) => {\r\n\t\t\tif ( e.target.closest( '.add-special' ) ) {\r\n\t\t\t\tconst wrap = e.target.closest( '.folder-config-item' )?.querySelector( '.special-cases' );\r\n\t\t\t\tif ( wrap ) {\r\n\t\t\t\t\twrap.insertAdjacentHTML( 'beforeend', specialCaseRowHtml() );\r\n\t\t\t\t\tmarkDirty();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( e.target.closest( '.remove-special' ) ) {\r\n\t\t\t\tconst row = e.target.closest( '.special-case' );\r\n\t\t\t\tif ( row ) {\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t\tmarkDirty();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( e.target.closest( '.remove-folder-column' ) ) {\r\n\t\t\t\tconst li = e.target.closest( '.folder-config-item' );\r\n\t\t\t\tif ( li ) {\r\n\t\t\t\t\tli.remove();\r\n\t\t\t\t\trenumberFolders();\r\n\t\t\t\t\tmarkDirty();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tlist.addEventListener( 'sorted', () => {\r\n\t\t\trenumberFolders();\r\n\t\t\tdirty = true;\r\n\t\t\tupdateInput(); // immediate update after reorder\r\n\t\t} );\r\n\r\n\t\t// init\r\n\r\n\t\tPromise.all( [\r\n\t\t\tfetch( `${ window.BASE_URL }utils/read_config.php?file=folders`, {cache: 'no-store'} ).then( r => r.json() ).catch( () => [] ),\r\n\t\t\tfetchLinkTemplates()\r\n\t\t] ).then( ( [ data ] ) => {\r\n\t\t\tenableDragSort( '#folders-config-list' );\r\n\t\t\tif ( Array.isArray( data ) && data.length ) {\r\n\t\t\t\tappendFolderItems( data );\r\n\t\t\t}\r\n\t\t\tif ( list.children.length === 0 ) addFolderItem( {} );\r\n\t\t\tdirty = true;\r\n\t\t\tupdateInput();\r\n\t\t} );\r\n\r\n\t\taddBtn.addEventListener( 'click', () => {\r\n\t\t\taddFolderItem( {} );\r\n\t\t} );\r\n\t} );\r\n}\r\n","// assets/js/modules/linkTemplates.js\nimport {attachHtmlEditor} from './htmlSyntaxEditor.js';\n\n// ðŸ”§ Toggle this to enable/disable syntax highlighting editor\nconst USE_SYNTAX_HIGHLIGHTER = true;\n\nexport function initLinkTemplates() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tconst list = document.getElementById( 'link-templates-list' );\n\t\tconst addBtn = document.getElementById( 'add-link-template' );\n\t\tconst PLACEHOLDER = 'HTML Template';\n\t\tif ( !list || !addBtn ) return;\n\n\t\tfunction loadTemplatesFromFile() {\n\t\t\tlist.innerHTML = '';\n\t\t\tfetch( `${ window.BASE_URL }utils/read_config.php?file=link_templates`, {cache: 'no-store'} )\n\t\t\t\t.then( res => res.json() )\n\t\t\t\t.then( data => {\n\t\t\t\t\tconst arr = Array.isArray( data )\n\t\t\t\t\t\t? data\n\t\t\t\t\t\t: Array.isArray( data?.templates ) ? data.templates : [];\n\t\t\t\t\tarr.forEach( addTemplateItem );\n\t\t\t\t\tupdateHiddenInput();\n\t\t\t\t} )\n\t\t\t\t.catch( () => updateHiddenInput() );\n\t\t}\n\n\t\tfunction updateHiddenInput() {\n\t\t\tconst templates = [];\n\t\t\tlist.querySelectorAll( '.template-item' ).forEach( item => {\n\t\t\t\tconst name = item.querySelector( '.template-name' )?.value.trim();\n\n\t\t\t\tlet html = '';\n\t\t\t\tif ( USE_SYNTAX_HIGHLIGHTER ) {\n\t\t\t\t\thtml = item.querySelector( '.template-html' )?.textContent || '';\n\t\t\t\t} else {\n\t\t\t\t\thtml = item.querySelector( '.template-textarea' )?.value || '';\n\t\t\t\t}\n\n\t\t\t\thtml = html.replace( /\\u200B/g, '' );\n\t\t\t\tif ( name && html ) templates.push( {name, html} );\n\t\t\t} );\n\t\t\tconst hidden = document.getElementById( 'link_templates_json_input' );\n\t\t\tif ( hidden ) hidden.value = JSON.stringify( templates, null, 2 );\n\t\t}\n\n\t\tfunction addTemplateItem( data = {} ) {\n\t\t\tconst li = document.createElement( 'li' );\n\t\t\tli.className = 'template-item';\n\n\t\t\t// Editor markup changes depending on toggle\n\t\t\tlet editorMarkup = '';\n\t\t\tif ( USE_SYNTAX_HIGHLIGHTER ) {\n\t\t\t\teditorMarkup = `\n\t\t\t\t\t<div class=\"template-html-wrapper\">\n\t\t\t\t\t\t<pre class=\"template-html syntax-highlight\"\n\t\t\t\t\t\t\trole=\"textbox\" aria-multiline=\"true\" aria-label=\"HTML Template\"\n\t\t\t\t\t\t\tplaceholder=\"${ PLACEHOLDER }\"></pre>\n\t\t\t\t\t</div>`;\n\t\t\t} else {\n\t\t\t\teditorMarkup = `\n\t\t\t\t\t<textarea class=\"template-textarea\"\n\t\t\t\t\t\tplaceholder=\"${ PLACEHOLDER }\" spellcheck=\"false\"\n\t\t\t\t\t\tautocomplete=\"off\" autocapitalize=\"off\" autocorrect=\"off\"\n\t\t\t\t\t\trows=\"5\">${ data.html || '' }</textarea>`;\n\t\t\t}\n\n\t\t\tli.innerHTML = `\n\t\t\t\t<input type=\"text\" class=\"template-name\" placeholder=\"Template Name\" value=\"${ data.name || '' }\">\n\t\t\t\t${ editorMarkup }\n\t\t\t\t<button type=\"button\" class=\"remove-template\">âŒ</button>\n\t\t\t`;\n\n\t\t\t// --- Wire up behaviour ---\n\t\t\tlet api = null;\n\n\t\t\tif ( USE_SYNTAX_HIGHLIGHTER ) {\n\t\t\t\tconst editor = li.querySelector( '.template-html' );\n\t\t\t\teditor.textContent = data.html || '';\n\n\t\t\t\tapi = attachHtmlEditor( editor, {\n\t\t\t\t\tplaceholder: PLACEHOLDER,\n\t\t\t\t\tonChange: updateHiddenInput\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tconst textarea = li.querySelector( '.template-textarea' );\n\t\t\t\ttextarea.addEventListener( 'input', updateHiddenInput );\n\t\t\t}\n\n\t\t\t// Remove button\n\t\t\tli.querySelector( '.remove-template' ).addEventListener( 'click', () => {\n\t\t\t\tif ( api && typeof api.destroy === 'function' ) api.destroy();\n\t\t\t\tli.remove();\n\t\t\t\tupdateHiddenInput();\n\t\t\t} );\n\n\t\t\t// Sync name field\n\t\t\tli.querySelector( '.template-name' ).addEventListener( 'input', updateHiddenInput );\n\n\t\t\tlist.appendChild( li );\n\t\t\tupdateHiddenInput();\n\t\t}\n\n\t\taddBtn.addEventListener( 'click', () => addTemplateItem() );\n\t\tloadTemplatesFromFile();\n\t} );\n}\n","// assets/js/modules/system.js\nexport function initSystemMonitoring() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tconst body = document.body;\n\t\tconst systemStatsSection = document.getElementById( 'system-monitor' );\n\n\t\tif ( !systemStatsSection ) return;\n\n\t\tconst ajaxEnabled = body.getAttribute( 'data-ajax-stats-enabled' ) === 'true';\n\t\tif ( !ajaxEnabled ) return;\n\n\t\tconst cpuElem = document.getElementById( 'cpu-load' );\n\t\tconst memElem = document.getElementById( 'memory-usage' );\n\t\tconst diskElem = document.getElementById( 'disk-space' );\n\n\t\tlet statsInterval;\n\n\t\tfunction fetchSystemStats() {\n\t\t\tfetch( `${ window.BASE_URL }utils/system_stats.php`, {cache: 'no-store'} )\n\t\t\t\t.then( response => {\n\t\t\t\t\tif ( !response.ok ) throw new Error( 'System stats unavailable' );\n\t\t\t\t\treturn response.json();\n\t\t\t\t} )\n\t\t\t\t.then( data => {\n\t\t\t\t\tcpuElem.textContent = `${ data.cpu }%`;\n\t\t\t\t\tmemElem.textContent = `${ data.memory } MB`;\n\t\t\t\t\tdiskElem.textContent = `${ data.disk }%`;\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction startMonitoring() {\n\t\t\tstatsInterval = setInterval( fetchSystemStats, 1000 );\n\t\t\tfetchSystemStats();\n\t\t}\n\n\t\t// Only begin polling once we know the backend is returning valid JSON\n\t\tfetch( `${ window.BASE_URL }utils/system_stats.php`, {cache: 'no-store'} )\n\t\t\t.then( response => {\n\t\t\t\tif ( !response.ok ) return;\n\t\t\t\treturn response.json();\n\t\t\t} )\n\t\t\t.then( data => {\n\t\t\t\t// First fetch succeeded â€” safe to start polling\n\t\t\t\tcpuElem.textContent = `${ data.cpu }%`;\n\t\t\t\tmemElem.textContent = `${ data.memory } MB`;\n\t\t\t\tdiskElem.textContent = `${ data.disk }%`;\n\t\t\t\tstartMonitoring();\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\t// Do nothing â€” let next AJAX-enabled cycle pick it up silently\n\t\t\t} );\n\t} );\n}\n","// assets/js/modules/accordion.js\r\nexport function initToggleAccordion() {\r\n    // Ensure Firefox animates collapses\r\n    function forceReflow( el ) {\r\n        void el.offsetHeight;\r\n    }\r\n\r\n    function isClickInside( e, sel ) {\r\n        return !!e.target.closest( sel );\r\n    }\r\n\r\n    function firstFocusable( root ) {\r\n        return root.querySelector( 'a,button,input,select,textarea,[tabindex]:not([tabindex=\"-1\"])' );\r\n    }\r\n\r\n    function getTransitionMs( el ) {\r\n        const cs = getComputedStyle( el );\r\n        // Handles multiple comma-separated durations (take the longest)\r\n        const parseList = ( s ) => s.split( ',' ).map( v => parseFloat( v ) || 0 );\r\n        const d = Math.max( ...parseList( cs.transitionDuration ) );\r\n        const delay = Math.max( ...parseList( cs.transitionDelay ) );\r\n        return Math.round( (d + delay) * 1000 ) || 0;\r\n    }\r\n\r\n    document.addEventListener( 'DOMContentLoaded', () => {\r\n        document.querySelectorAll( '.toggle-content-container' ).forEach( ( container, index ) => {\r\n            // Guard against double init\r\n            if ( container.dataset.accordionInit === '1' ) return;\r\n            container.dataset.accordionInit = '1';\r\n\r\n            const toggle = container.querySelector( '.toggle-accordion' );\r\n            const content = container.querySelector( '.toggle-content' );\r\n            if ( !toggle || !content ) return;\r\n\r\n            const collapsedHeight = parseInt( content.dataset.collapsedHeight ) || 0;\r\n            const accordionId = container.dataset.id || 'accordion-' + index;\r\n\r\n            // Animation control\r\n            let animToken = 0;      // bumped for each open/close run\r\n            let fallbackTimer = 0;  // transitionend safety net\r\n            let onEnd = null;       // current transitionend handler\r\n\r\n            function clearAnimGuards() {\r\n                if ( onEnd ) {\r\n                    content.removeEventListener( 'transitionend', onEnd );\r\n                    onEnd = null;\r\n                }\r\n                if ( fallbackTimer ) {\r\n                    clearTimeout( fallbackTimer );\r\n                    fallbackTimer = 0;\r\n                }\r\n            }\r\n\r\n            function setOpenAria( isOpen ) {\r\n                container.classList.toggle( 'open', isOpen );\r\n                toggle.setAttribute( 'aria-expanded', isOpen ? 'true' : 'false' );\r\n                localStorage.setItem( 'accordion_' + accordionId, isOpen ? 'open' : 'closed' );\r\n            }\r\n\r\n            function finishOpen( token ) {\r\n                if ( token !== animToken ) return;\r\n                content.style.height = 'auto';\r\n            }\r\n\r\n            function finishClose( token ) {\r\n                if ( token !== animToken ) return;\r\n                content.hidden = true; // remove from tab order after animation\r\n            }\r\n\r\n            function openPanel() {\r\n                const token = ++animToken;\r\n                clearAnimGuards();\r\n\r\n                // Unhide immediately for any open intent\r\n                content.hidden = false;\r\n                setOpenAria( true );\r\n\r\n                // Animate from collapsed -> target -> auto\r\n                content.style.height = collapsedHeight + 'px';\r\n                forceReflow( content );\r\n                requestAnimationFrame( () => {\r\n                    if ( token !== animToken ) return;\r\n                    const target = content.scrollHeight;\r\n                    content.style.height = target + 'px';\r\n\r\n                    onEnd = ( e ) => {\r\n                        if ( e.target !== content || e.propertyName !== 'height' ) return;\r\n                        clearAnimGuards();\r\n                        finishOpen( token );\r\n                    };\r\n                    content.addEventListener( 'transitionend', onEnd );\r\n\r\n                    const ms = getTransitionMs( content );\r\n                    if ( ms > 0 ) {\r\n                        fallbackTimer = setTimeout( () => {\r\n                            clearAnimGuards();\r\n                            finishOpen( token );\r\n                        }, ms + 40 );\r\n                    }\r\n                } );\r\n            }\r\n\r\n            function closePanel() {\r\n                const token = ++animToken;\r\n                clearAnimGuards();\r\n\r\n                setOpenAria( false );\r\n\r\n                // Animate current -> collapsed, THEN hide\r\n                content.style.height = content.scrollHeight + 'px';\r\n                forceReflow( content );\r\n                requestAnimationFrame( () => {\r\n                    if ( token !== animToken ) return;\r\n                    content.style.height = collapsedHeight + 'px';\r\n\r\n                    onEnd = ( e ) => {\r\n                        if ( e.target !== content || e.propertyName !== 'height' ) return;\r\n                        clearAnimGuards();\r\n                        finishClose( token );\r\n                    };\r\n                    content.addEventListener( 'transitionend', onEnd );\r\n\r\n                    const ms = getTransitionMs( content );\r\n                    if ( ms > 0 ) {\r\n                        fallbackTimer = setTimeout( () => {\r\n                            clearAnimGuards();\r\n                            finishClose( token );\r\n                        }, ms + 40 );\r\n                    }\r\n                } );\r\n            }\r\n\r\n            function togglePanel() {\r\n                const willOpen = !container.classList.contains( 'open' );\r\n                // If opening, guarantee visibility immediately to avoid â€œstuck hiddenâ€\r\n                if ( willOpen && content.hidden ) content.hidden = false;\r\n                willOpen ? openPanel() : closePanel();\r\n\r\n                // Self-heal if state and hidden diverge\r\n                requestAnimationFrame( () => {\r\n                    const isOpen = container.classList.contains( 'open' );\r\n                    if ( isOpen && content.hidden ) content.hidden = false;\r\n                } );\r\n            }\r\n\r\n            // Initial state (restore + ARIA + hidden)\r\n            const saved = localStorage.getItem( 'accordion_' + accordionId );\r\n            const startOpen = saved === 'open';\r\n            setOpenAria( startOpen );\r\n\r\n            if ( startOpen ) {\r\n                content.hidden = false; // must be visible to measure\r\n                content.style.height = content.scrollHeight + 'px';\r\n                requestAnimationFrame( () => {\r\n                    content.style.height = 'auto';\r\n                } );\r\n            } else {\r\n                content.style.height = collapsedHeight + 'px';\r\n                content.hidden = true; // keyboard users won't tab into closed panel\r\n            }\r\n\r\n            // Mouse/touch\r\n            toggle.addEventListener( 'click', ( event ) => {\r\n                event.stopPropagation();\r\n                // Ignore clicks on tooltip icon\r\n                if ( isClickInside( event, '.tooltip-icon' ) ) return;\r\n                togglePanel();\r\n            } );\r\n\r\n            // Keyboard: Space/Enter toggle; ArrowDown jumps into open panel\r\n            toggle.addEventListener( 'keydown', ( e ) => {\r\n                if ( e.key === ' ' || e.key === 'Enter' ) {\r\n                    e.preventDefault();\r\n                    togglePanel();\r\n                } else if ( e.key === 'ArrowDown' ) {\r\n                    if ( container.classList.contains( 'open' ) && !content.hidden ) {\r\n                        const target = firstFocusable( content );\r\n                        if ( target ) target.focus();\r\n                    }\r\n                }\r\n            } );\r\n        } );\r\n\r\n        // Keep heights sane on resize\r\n        window.addEventListener( 'resize', () => {\r\n            document.querySelectorAll( '.toggle-content-container.open .toggle-content' ).forEach( ( content ) => {\r\n                if ( content.hidden ) content.hidden = false;\r\n                if ( content.style.height !== 'auto' ) {\r\n                    content.style.height = content.scrollHeight + 'px';\r\n                }\r\n            } );\r\n        } );\r\n    } );\r\n}\r\n","// assets/js/modules/view.js\r\nexport function initViewToggles() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst views = {\r\n\t\t\t'index': document.getElementById( 'folders-view' ),\r\n\t\t\t'settings': document.getElementById( 'settings-view' ),\r\n\t\t\t'phpinfo': document.getElementById( 'phpinfo-view' ),\r\n\t\t\t'apache': document.getElementById( 'apache-view' ),\r\n\t\t\t'mysql': document.getElementById( 'mysql-view' ),\r\n\t\t};\r\n\r\n\t\tconst pathMap = {\r\n\t\t\t'index': 'index',\r\n\t\t\t'settings': 'settings',\r\n\t\t\t'phpinfo': 'phpinfo',\r\n\t\t\t'apache-inspector': 'apache',\r\n\t\t\t'mysql-inspector': 'mysql',\r\n\t\t};\r\n\r\n\t\tconst toggleMap = {\r\n\t\t\t'toggle-index': 'index',\r\n\t\t\t'toggle-settings': 'settings',\r\n\t\t\t'toggle-phpinfo': 'phpinfo',\r\n\t\t\t'toggle-apache-inspector': 'apache-inspector',\r\n\t\t\t'toggle-mysql-inspector': 'mysql-inspector',\r\n\t\t};\r\n\r\n\t\tfunction getCurrentRoute() {\r\n\t\t\tconst params = new URLSearchParams( window.location.search );\r\n\t\t\treturn params.get( 'view' ) || 'index';\r\n\t\t}\r\n\r\n\t\tfunction updatePageTitle( routeKey ) {\r\n\t\t\tconst prefixEl = document.getElementById( 'page-title-prefix' );\r\n\t\t\tif ( !prefixEl ) return;\r\n\r\n\t\t\tconst prefix = prefixEl.dataset.prefix || '';\r\n\r\n\t\t\tconst titles = {\r\n\t\t\t\t'index': 'Modern Localhost and Remote Dashboard for Apache, MySQL & PHP',\r\n\t\t\t\t'settings': 'Settings',\r\n\t\t\t\t'phpinfo': 'PHP Info',\r\n\t\t\t\t'apache-inspector': 'Apache Inspector',\r\n\t\t\t\t'mysql-inspector': 'MySQL Inspector',\r\n\t\t\t};\r\n\r\n\t\t\tconst subtitle = titles[routeKey] || titles.index;\r\n\t\t\tdocument.title = prefix + subtitle;\r\n\t\t}\r\n\r\n\t\tfunction updateActiveNav( routeKey ) {\r\n\t\t\tObject.entries( toggleMap ).forEach( ( [ toggleId, viewKey ] ) => {\r\n\t\t\t\tconst toggle = document.getElementById( toggleId );\r\n\t\t\t\tif ( !toggle ) return;\r\n\r\n\t\t\t\tif ( viewKey === routeKey ) {\r\n\t\t\t\t\ttoggle.classList.add( 'active-page' );\r\n\t\t\t\t\ttoggle.setAttribute( 'aria-current', 'page' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttoggle.classList.remove( 'active-page' );\r\n\t\t\t\t\ttoggle.removeAttribute( 'aria-current' );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction showView( routeKey, push = false ) {\r\n\t\t\tconst key = pathMap[routeKey] || 'index';\r\n\r\n\t\t\tupdateActiveNav( routeKey );\r\n\r\n\t\t\tObject.entries( views ).forEach( ( [ k, el ] ) => {\r\n\t\t\t\tif ( el ) el.classList.toggle( 'visible', k === key );\r\n\t\t\t} );\r\n\r\n\t\t\tupdatePageTitle( routeKey );\r\n\r\n\t\t\t// Lazy load for Apache and MySQL views\r\n\t\t\tif ( key === 'apache' || key === 'mysql' ) {\r\n\t\t\t\tconst target = views[key];\r\n\t\t\t\tif ( target && !target.dataset.loaded ) {\r\n\t\t\t\t\t// To use a spinning emoji, add the class \"emoji\" to \"loader\" and insert your emoji within the <span>\r\n\t\t\t\t\ttarget.innerHTML = '<div class=\"loader\"><span class=\"spinner\" role=\"img\" aria-label=\"Loading\"></span></div>';\r\n\t\t\t\t\tconst url = `utils/${ key }_inspector.php`;\r\n\r\n\t\t\t\t\tfetch( `${ window.BASE_URL || '/' }${ url }` )\r\n\t\t\t\t\t\t.then( res => res.text() )\r\n\t\t\t\t\t\t.then( html => {\r\n\t\t\t\t\t\t\ttarget.innerHTML = html;\r\n\t\t\t\t\t\t\ttarget.dataset.loaded = 'true';\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t.catch( err => {\r\n\t\t\t\t\t\t\ttarget.innerHTML = `<p class=\"error\">Failed to load ${ url }</p>`;\r\n\t\t\t\t\t\t\tconsole.error( `[view.js] Failed to fetch ${ url }`, err );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( push ) {\r\n\t\t\t\tconst base = window.BASE_URL || window.location.pathname;\r\n\t\t\t\tconst param = key === 'index' ? '' : '?view=' + encodeURIComponent( routeKey );\r\n\t\t\t\thistory.pushState( {}, '', base + param );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Attach toggle click handlers\r\n\t\tObject.entries( toggleMap ).forEach( ( [ toggleId, routeKey ] ) => {\r\n\t\t\tconst toggle = document.getElementById( toggleId );\r\n\t\t\tif ( toggle ) {\r\n\t\t\t\ttoggle.addEventListener( 'click', ( e ) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tshowView( routeKey, true );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Initial load\r\n\t\tshowView( getCurrentRoute() );\r\n\r\n\t\t// Back/forward navigation\r\n\t\twindow.addEventListener( 'popstate', () => {\r\n\t\t\tshowView( getCurrentRoute() );\r\n\t\t} );\r\n\t} );\r\n}\r\n"],"names":["_initialisedLists","WeakSet","enableDragSort","listSelector","opts","list","document","querySelector","has","add","itemsSelector","items","handleSelector","handle","interactiveSelector","allowInsideHandle","allowHandleInteractive","dragSrcEl","dragging","pointerDrag","active","startX","startY","id","started","didReorder","reorderItems","target","children","Array","from","querySelectorAll","indexOf","to","after","before","endPointerDrag","e","pointerId","dispatchEvent","CustomEvent","bubbles","forEach","el","classList","remove","draggable","hasPointerCapture","releasePointerCapture","_","resetDragState","addEventListener","item","closest","contains","isHandleHit","pointerType","clientX","clientY","setPointerCapture","capture","dataTransfer","effectAllowed","setData","preventDefault","dx","Math","abs","dy","targetEl","elementFromPoint","overItem","WIDTH_SIZES","getWidthKey","dataset","widthKey","setWidthForElement","size","storageKey","localStorage","setItem","cls","startsWith","style","maxWidth","cycleWidthForElement","direction","sizes","current","getItem","nextIdx","idx","length","updateClock","clock","now","Date","textContent","toLocaleTimeString","hour","minute","second","hour12","initGenericErrorLog","sectionId","toggleButtonId","logElementId","endpoint","body","getElementById","toggleBtn","logElement","displayLogContent","data","isEmpty","trim","innerHTML","fetchLog","fetch","window","BASE_URL","cache","then","res","ok","text","Promise","reject","isVisible","toggle","this","setAttribute","getAttribute","setInterval","catch","setupExport","groupEl","folderEl","uploadsModeRow","filesForm","filesStatus","dbForm","dbSelect","dbStatus","groups","refreshCsrf","credentials","r","json","d","token","value","getArchiveEngine","checked","Error","error","disabled","display","selectEl","g","opt","createElement","String","index","title","appendChild","renderGroups","options","Event","err","console","dbs","databases","name","parseInt","group","Number","isNaN","def","subfolders","sf","selectedIndex","gIdx","find","s","showUploads","isWordPress","hasUploads","form","FormData","append","method","html","href","message","location","attachHtmlEditor","editor","PLACEHOLDER","placeholder","lastText","renderScheduled","allowFocusEscape","getPlainText","replace","saveCaretPosition","element","sel","getSelection","rangeCount","range","getRangeAt","pre","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","len","min","toString","restoreCaretPosition","position","createRange","lastTextNode","walker","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","node","currentNode","nodeValue","setStart","collapse","removeAllRanges","addRange","empty","createTextNode","renderHighlight","raw","caretPos","endsWith","match","inner","slice","isClosing","selfClosing","firstSpace","search","tagName","toLowerCase","rest","eqPart","m","quote","hasAttribute","lastChild","nodeType","Node","TEXT_NODE","onChange","onBeforeInput","inputType","clipboardData","plain","pos","newText","setTextAtCaret","getData","onKeyDown","key","shiftKey","insert","split","pop","newPos","focus","onInput","test","requestAnimationFrame","onBlur","describedBy","getValue","setValue","destroy","removeEventListener","searchProjects","input","includes","STORAGE_PREFIXES","setTheme","theme","root","documentElement","className","filter","join","colorScheme","themeTypes","meta","head","bindButtons","button","generateCert","confirm","encodeURIComponent","msg","alert","restartBtn","click","setupFiltering","rows","visibleCount","row","isSSL","hasCert","hasHost","show","emptyMsg","setupOpenFolder","matches","path","headers","JSON","stringify","bind","buttons","event","customSelector","region","resolveTarget","collapsed","labelExpanded","labelCollapsed","srSpan","setState","readyState","initCollapseToggle","savedSize","controls","widthFor","resetBtn","prevBtn","nextBtn","container","savedOrder","parse","saveOrder","order","map","Boolean","isArray","col","dockList","addBtn","addDockItem","li","label","url","icon","alt","updateInput","dockItems","inputs","push","dockJsonInput","jsonInput","linkTemplates","templateOptionsHtml","dirty","debounceTimer","specialCaseRowHtml","sc","folderItemHtml","casesHtml","scMap","specialCases","Object","entries","linkTemplate","uid","random","headingId","dir","excludeList","urlRules","disableLinks","requireVhost","renumberFolders","labelEl","addFolderItem","tmp","firstElementChild","select","markDirty","clearTimeout","setTimeout","get","excludeStr","scRows","rowsToMap","record","keys","serializeList","wrap","insertAdjacentHTML","all","LINK_TEMPLATES","t","Set","n","resolve","frag","createDocumentFragment","child","titleInLi","found","it","val","appendFolderItems","updateHiddenInput","templates","hidden","addTemplateItem","editorMarkup","api","searchBar","clearBtn","some","prefix","removeItem","reload","transition","opacity","cpuElem","memElem","diskElem","statsInterval","fetchSystemStats","response","cpu","memory","disk","selector","saved","serverTheme","selected","forceReflow","offsetHeight","getTransitionMs","cs","getComputedStyle","parseList","v","parseFloat","max","transitionDuration","delay","transitionDelay","round","accordionInit","content","collapsedHeight","accordionId","animToken","fallbackTimer","onEnd","clearAnimGuards","setOpenAria","isOpen","finishOpen","height","finishClose","togglePanel","willOpen","scrollHeight","propertyName","ms","openPanel","closePanel","startOpen","stopPropagation","initToggleAccordion","views","pathMap","toggleMap","getCurrentRoute","URLSearchParams","showView","routeKey","toggleId","viewKey","removeAttribute","updateActiveNav","k","prefixEl","titles","subtitle","updatePageTitle","loaded","base","pathname","param","history","pushState"],"ignoreList":[],"sourceRoot":""}